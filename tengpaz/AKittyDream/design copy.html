<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Kitty Dream</title>
    <link type="stylesheet" src="css/design.css"/>
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      .header {
        display: flex;
        background-color: #333;
        color: white;
        padding: 0;
        text-align: left;
        font-size: 32px;
        font-weight: bold;
        width: 100%;
        position: fixed;
      }
      .header .item {
        color: #dedede;
        padding: 5px;
        padding-top: 15px;
        font-size: 20px;
        font-weight:lighter;
        text-align: center;
      }
      .header a {
        color: #dedede;
        padding: 5px;
        padding-top: 15px;
        font-size: 20px;
        font-weight:lighter;
        text-align: center;
        text-decoration: none;
      }
      .header .item:hover {
        color: white;
        padding: 5px;
        padding-top: 15px;
        text-align: center;
      }
      .header a:hover {
        color: white;
        padding: 5px;
        padding-top: 15px;
        text-align: center;
      }
      .header img[src] {
        margin: 4px;
        border-radius: 4px;
        width: 50px;
        height: 48px;
      }
      .nav {
        background-color: #ddd;
        padding: 10px;
        text-align: center;
      }
      .nav-button {
        background-color: #ddd;
        border: none;
        color: #333;
        padding: 10px 15px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 4px; /* 圆角边框 */
      }
      .nav-button:hover {
        background-color: #ccc;
      }
      .nav a {
        color: #333;
        text-decoration: none;
        margin-right: 10px;
      }
      .subnav {
        font-size: 16px;
        margin: 4px 2px;
      }
      .container {
        display: flex;
        justify-content: space-between;
        padding: 10px;
      }
      .content-main {
        flex: 0 0 1460px; /* Fixed width for main content */
      }
      .footer {
        background-color: #333;
        color: white;
        text-align: center;
        padding: 10px;
        position: fixed;
        bottom: 0;
        width: 100%;
        z-index: 10000;
      }
    </style>
  </head>
  
  <body>
    <div class="header">
      <div class="container">
        <img src="img/favicon.png" alt="A Kitty Dream" href="#">
        <div class="item" href="design.html">
          <a href="design.html">游戏设计</a>
        </div>
        <div class="item">
          游戏规模
        </div>
        <div class="item">
          游戏攻略
        </div>
        <div class="item">
          关于作者
        </div>
        <div class="item">
          支持
        </div>
        <div class="container">
        游戏设计
        </div>
      </div>
    </div>

    <div class="nav">
      <div class="subnav">
        游戏设计
      </div>
    </div>

    <div>
    <body class='typora-export os-windows'><div class='typora-export-content'>
      <div id='write'  class=''><h1 id='系统设计说明书'><span>系统设计说明书</span></h1><hr /><h2 id='1-引言'><span>1. </span><strong><span>引言</span></strong></h2><h3 id='11-目的'><span>1.1 </span><strong><span>目的</span></strong></h3><p><span>文档目标：本文档旨在描述本游戏项目《</span><strong><span>A Kitty Dream 小猫梦游历险记</span></strong><span>》的系统设计架构细节，包括游戏的功能、算法、实现细节具体的技术细节和技术难点以及实现方案，为游戏系统设计架构提供具体详尽的说明，便于描述项目实现细节，为项目提供除实际功能和展现成果外的后台补充说明，便于快速掌握游戏项目的概貌，以确保系统满足需求规格说明书中的所有要求，为未来的开发、维护和扩展提供参考和指导的技术文档。</span></p><p><span>读者对象：本说明书主要面向游戏玩家，系统设计开发人员，游戏测评师，游戏审查平台，游戏介绍平台著写。</span></p><p><span>适用范围：本说明书适用于开发人员、测试人员、系统维护人员，以及任何需要理解《AKittyDream》游戏设计和实现的技术团队。</span></p><h3 id='12-背景'><span>1.2 </span><strong><span>背景</span></strong></h3><p><span>开发思路来源于Nirome公司开发的一款</span><code>Flash</code><span>网页小游戏，游戏设计新颖，富有创意，界面精美，可玩性强，深受玩家喜爱，受Nirome公司可开发的《A Kitty Dream》游戏的影响，游戏项目开发设计之初选择了以该游戏为主要设计模板进行游戏开发设计，尽可能完成游戏的完整实现，满足玩家游戏需求，简化游戏实现复杂点。</span></p><h3 id='13-术语和定义'><span>1.3 </span><strong><span>术语和定义</span></strong></h3><ul><li><p><code>A Kitty Dream</code><span>: 开发的游戏项目名称。</span></p></li><li><p><code>Player</code><span>: 玩家操控的角色，即游戏中的小猫。</span></p></li><li><p><code>Dash</code><span>: 游戏中小猫的冲刺动作，能够快速向某一方向移动。</span></p></li><li><p><code>MoveBlock</code><span>: 游戏中可以被推动的方块，玩家通过与方块的互动来解锁新区域或完成谜题。</span></p></li><li><p><code>Checkpoint</code><span>: 游戏中的存档点，玩家可以在此保存游戏进度。</span></p></li><li><p><code>World</code><span>: 游戏的不同场景或关卡，例如主世界、天国、地府等。</span></p></li><li><p><code>SceneManager</code><span>: Unity中的场景管理器，负责加载和切换不同的场景。</span></p></li></ul><h3 id='14-参考资料'><span>1.4 </span><strong><span>参考资料</span></strong></h3><ul><li><p><a href='https://developer.mozilla.org/zh-CN/docs/Games'><span>游戏开发文档</span></a></p></li><li><p><a href='https://docs.unity3d.com/cn/2022.3/Manual/UnityManual.html'><span>Unity用户手册</span></a></p></li><li><p><a href='https://www.runoob.com/csharp/csharp-tutorial.html'><span>C#教程</span></a></p></li><li><p><a href='[粘住角色来回运动_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1k64y1N7MV/?p=11&amp;spm_id_from=pageDriver&amp;vd_source=f0258a42ed2159cb6f0ccfafbc203bc6)'><span>【unity/2d/超基础】教你做一款2d横版游戏</span></a></p></li><li><p><a href='https://zhuanlan.zhihu.com/p/138076082'><span>如何开始绘制像素画</span></a></p></li><li><p><a href='https://blog.csdn.net/BrosyveryOK/article/details/125650392'><span>【Unity】场景切换保留数据的解决方案_unity切换场景后保留原场景数据-CSDN博客</span></a></p></li><li><p><a href='https://blog.csdn.net/smallfox233/article/details/118035072'><span>Unity(13)-场景切换，保留资源_unity场景切换ui不变-CSDN博客</span></a></p></li><li><p><a href='https://developer.unity.cn/ask/question/66542828edbc2a001ddb1c4d'><span>使用SceneManager.LoadScene 多场景切换，切换场景显示组件被 - 技术问答 - Unity官方开发者社区</span></a></p></li><li><p><a href='https://blog.csdn.net/qq_44097516/article/details/129926109'><span>SceneManager.sceneLoaded的用法-CSDN博客</span></a></p></li><li><p><a href='https://blog.csdn.net/cathy_2017/article/details/88854366'><span>unity中代码的运行顺序_怎么控制unity代码语句的执行顺序-CSDN博客</span></a></p></li><li><p><a href='https://docs.unity.cn/cn/2020.3/Manual/ExecutionOrder.html'><span>事件函数的执行顺序 - Unity 手册</span></a></p></li><li><p><a href='https://docs.unity.cn/cn/2019.2/Manual/class-MonoManager.html'><span>脚本执行顺序 (Script Execution Order) - Unity 手册</span></a></p></li><li><p><a href='https://docs.unity.cn/cn/2020.3/Manual/class-Rigidbody2D.html'><span>2D 刚体 - Unity 手册</span></a></p></li><li><p><a href='https://blog.csdn.net/qq_34147601/article/details/85129171'><span>C# 之 Math取整数_c# 保留整数-CSDN博客</span></a></p></li><li><p><a href='https://blog.csdn.net/qq_32803337/article/details/131240516'><span>Unity WebGL项目打包后本地打开报错问题解决方法_unity导出webgl后html打不开-CSDN博客</span></a></p></li><li><p><a href='https://blog.csdn.net/linxinfa/article/details/116331434'><span>【游戏开发进阶】Unity发布Windows平台exe后制作成漂亮美观的Setup.exe安装程序（图文讲解，支持多语言，含Demo源码）_unitysetupskinnsis-CSDN博客</span></a></p></li><li><p><a href='https://developer.unity.cn/projects/63bcce43edbc2a3ec331cc75'><span>从零开始的Unity学习_15. 文件和流（上） - 技术专栏 - Unity官方开发者社区</span></a></p></li></ul><h2 id='2-系统概述'><span>2. </span><strong><span>系统概述</span></strong></h2><h3 id='21-系统架构概述'><span>2.1 </span><strong><span>系统架构概述</span></strong></h3><p><span>《AKittyDream》游戏采用模块化设计，系统架构分为以下主要模块：</span></p><ul><li><p><strong><span>玩家控制模块</span></strong></p></li><li><p><strong><span>场景管理模块</span></strong></p></li><li><p><strong><span>存档系统</span></strong></p></li><li><p><strong><span>物理引擎与碰撞检测模块</span></strong></p></li><li><p><strong><span>音效与视觉效果模块</span></strong></p></li><li><p><strong><span>用户界面（UI）模块</span></strong></p></li></ul><p><span>系统整体分为三个部分：开始界面、游戏界面、结束界面</span></p><ul><li><p><span>开始界面：</span></p><p><span>分为画布部分、镜头控制、音效源、事件监听几个部分。</span></p></li><li><p><span>游戏界面：</span></p><p><span>游戏界面拆分为三大板块：主世界游戏板块、天国游戏板块、地府游戏板块。三个板块由一个公用物体——游戏控制器进行全局控制，控制游戏整体的进度储存、进度提示、进度调控、数据保存。</span></p><ul><li><p><strong><span>主世界游戏板块</span></strong><span>：</span></p><ul><li><p><strong><span>外设部分</span></strong><span>：摄像机</span><code>Camera</code><span>，全局光源</span><code>Light 2D</code><span>，音效源</span><code>Audio Source</code></p></li><li><p><strong><span>画布部分</span></strong><span>：包括NPC对话框、交互提示文字</span></p></li><li><p><strong><span>组件部分</span></strong><span>：包括游戏机关、可交互组件如存档点、传送床、按钮、机关门，特殊物品如技能物品、通关物品、隐藏物品（两个）</span></p></li><li><p><strong><span>地形部分</span></strong><span>：包括地图构建的组成部分，如地板、装饰植物等瓦块地图和平台、水等效应体。</span></p></li><li><p><strong><span>生物部分</span></strong><span>：包括游戏内部的引导和剧情控制NPC，玩家控制的角色</span></p></li></ul></li><li><p><strong><span>天国游戏板块</span></strong><span>：</span></p><ul><li><p><strong><span>外设部分</span></strong><span>：摄像机</span><code>Camera</code><span>，全局光源</span><code>Light 2D</code><span>，音效源</span><code>Audio Source</code></p></li><li><p><strong><span>画布部分</span></strong><span>：包括NPC对话框、交互提示文字</span></p></li><li><p><strong><span>组件部分</span></strong><span>：包括可交互组件如存档点、传送床、按钮、机关门，天国特殊物品移动方块，特殊物品如技能物品、通关物品、隐藏物品，没有机关物品。</span></p></li><li><p><strong><span>地形部分</span></strong><span>：包括地图构建的组成部分，如地板、装饰植物等瓦块地图和平台、水等效应体。</span></p></li><li><p><strong><span>生物部分</span></strong><span>：包括游戏内部的引导和剧情控制NPC，玩家控制的角色</span></p></li></ul></li><li><p><strong><span>地府游戏板块</span></strong><span>：</span></p><ul><li><p><strong><span>外设部分</span></strong><span>：摄像机</span><code>Camera</code><span>，全局光源</span><code>Light 2D</code><span>，音效源</span><code>Audio Source</code></p></li><li><p><strong><span>画布部分</span></strong><span>：包括NPC对话框、交互提示文字</span></p></li><li><p><strong><span>组件部分</span></strong><span>：包括游戏机关，可交互组件如存档点、传送床、按钮、机关门，特殊物品如技能物品、通关物品，没有隐藏物品</span></p></li><li><p><strong><span>地形部分</span></strong><span>：包括地图构建的组成部分，如地板、装饰植物等瓦块地图和平台、水等效应体。</span></p></li><li><p><strong><span>生物部分</span></strong><span>：包括游戏内部的引导和剧情控制NPC，玩家控制的角色</span></p></li></ul></li></ul></li><li><p><span>结束界面：</span></p><p><span>分为画布部分，用于结束界面的结束剧情文字展示，结束献词。镜头控制，固定；事件监听，监听游戏结束，按键事件。</span></p></li></ul><h3 id='22-技术栈'><span>2.2 </span><strong><span>技术栈</span></strong></h3><p><span>游戏开发基于Unity引擎，使用C#作为主要编程</span></p><p><span>语言，支持跨平台发布。图形渲染使用Unity的2D工具集，音效管理依赖于Unity内置的音频系统。</span></p><h3 id='23-系统功能概述'><span>2.3 </span><strong><span>系统功能概述</span></strong></h3><ul><li><p><strong><span>游戏逻辑管理</span></strong><span>：处理玩家输入、角色动作、场景切换等。</span></p></li><li><p><strong><span>物理与碰撞检测</span></strong><span>：负责游戏中的物理运算，如重力、碰撞检测、物体的运动状态等。</span></p></li><li><p><strong><span>用户界面</span></strong><span>：包括游戏菜单、状态栏、提示信息等。</span></p></li><li><p><strong><span>音效与视觉效果</span></strong><span>：管理游戏中的音效、背景音乐、视觉特效。</span></p></li></ul><h3 id='24-设计原则'><span>2.4 </span><strong><span>设计原则</span></strong></h3><p><span>总体设计采用高内聚、低耦合的设计原则，大模块之间联系疏松，依靠外部挂载的游戏控制模块实现大模块之间的数据通信与关联，模块内子模块元素之间联系紧密，依靠复杂的引用关系、从属关系设计。</span></p><h2 id='3-系统架构设计'><span>3. </span><strong><span>系统架构设计</span></strong></h2><h3 id='31-体系结构图'><span>3.1 </span><strong><span>体系结构图</span></strong></h3><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart0" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 897.936px; margin: auto;" viewBox="-8 -51.98147964477539 897.9361572265625 429.9930419921875" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart0{font-family:sans-serif;font-size:16px;fill:var(--text-color);}#mermaidChart0 .error-icon{fill:#552222;}#mermaidChart0 .error-text{fill:#552222;stroke:#552222;}#mermaidChart0 .edge-thickness-normal{stroke-width:2px;}#mermaidChart0 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart0 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart0 .marker{fill:#666;stroke:#666;}#mermaidChart0 .marker.cross{stroke:#666;}#mermaidChart0 svg{font-family:sans-serif;font-size:16px;}#mermaidChart0 .label{font-family:sans-serif;color:#000000;}#mermaidChart0 .cluster-label text{fill:#333;}#mermaidChart0 .cluster-label span,#mermaidChart0 p{color:#333;}#mermaidChart0 .label text,#mermaidChart0 span,#mermaidChart0 p{fill:#000000;color:#000000;}#mermaidChart0 .node rect,#mermaidChart0 .node circle,#mermaidChart0 .node ellipse,#mermaidChart0 .node polygon,#mermaidChart0 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaidChart0 .flowchart-label text{text-anchor:middle;}#mermaidChart0 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart0 .node .label{text-align:center;}#mermaidChart0 .node.clickable{cursor:pointer;}#mermaidChart0 .arrowheadPath{fill:#333333;}#mermaidChart0 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaidChart0 .flowchart-link{stroke:#666;fill:none;}#mermaidChart0 .edgeLabel{background-color:white;text-align:center;}#mermaidChart0 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaidChart0 .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaidChart0 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaidChart0 .cluster text{fill:#333;}#mermaidChart0 .cluster span,#mermaidChart0 p{color:#333;}#mermaidChart0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart0 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart0 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart0_flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="6" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart0_flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart0_flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart0_flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M323.605,34.678L184.01,74.288L184.01,129.647L184.01,185.006L245.183,218.868" id="L-block1-block2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block1 LE-block2" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M346.592,37.859L284.016,74.288L284.016,129.647L284.016,185.006L284.016,216.135" id="L-block1-block2-1" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block1 LE-block2" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M377.796,37.859L375.271,74.288L419.784,107.545" id="L-block1-block3-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block1 LE-block3" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M323.605,27.99L40.003,74.288L40.003,129.647L40.003,185.006L40.003,240.365L40.003,295.723L145.529,330.494" id="L-block1-block5-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block1 LE-block5" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M323.605,31.364L132.008,74.288L132.008,129.647L132.008,185.006L132.008,240.365L132.008,295.723L177.739,329.032" id="L-block1-block5-1" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block1 LE-block5" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M449.366,148.576L449.366,185.006L344.545,220.099" id="L-block3-block2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block3 LE-block2" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M472.077,110.718L515.786,74.288L430.756,39.848" id="L-block3-block1-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block3 LE-block1" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M727.587,110.718L758.681,74.288L439.856,27.789" id="L-block4-block1-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block4 LE-block1" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M434.612,29.576L667.719,74.288L693.199,106.558" id="L-block1-block4-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block1 LE-block4" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M284.016,259.294L284.016,295.723L238.285,329.032" id="L-block2-block5-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block2 LE-block5" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M339.52,246.601L776.682,295.723L811.329,328.51" id="L-block2-block6-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block2 LE-block6" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M434.612,25.568L841.933,74.288L841.933,129.647L841.933,185.006L841.933,240.365L841.933,295.723L838.132,326.892" id="L-block1-block6-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block1 LE-block6" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path><path d="M711.43,148.576L711.43,185.006L711.43,240.365L711.43,295.723L292.782,341.76" id="L-block4-block5-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-block4 LE-block5" style="fill:none;" marker-end="url(#mermaidChart0_flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(184.01041412353516, 129.64698791503906)"><g class="label" transform="translate(-32.002315521240234, -11.429397583007812)"><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">移动触发</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(284.0162010192871, 129.64698791503906)"><g class="label" transform="translate(-48.00347137451172, -11.429397583007812)"><foreignObject width="96.00694274902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">传送交互触发</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(375.27054023742676, 74.28819274902344)"><g class="label" transform="translate(-40.002891540527344, -11.429397583007812)"><foreignObject width="80.00578308105469" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">存档点交互</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(40.002891540527344, 185.0057830810547)"><g class="label" transform="translate(-40.002891540527344, -11.429397583007812)"><foreignObject width="80.00578308105469" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">存档点交互</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(132.00809860229492, 185.0057830810547)"><g class="label" transform="translate(-32.002315521240234, -11.429397583007812)"><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">移动音效</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(449.36559200286865, 185.0057830810547)"><g class="label" transform="translate(-86.56684112548828, -11.429397583007812)"><foreignObject width="173.13368225097656" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">返回读档CameraSpawn</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(515.7855854034424, 74.28819274902344)"><g class="label" transform="translate(-80.51215362548828, -11.429397583007812)"><foreignObject width="161.02430725097656" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">返回读档PlayerSpawn</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(758.6812725067139, 74.28819274902344)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">反馈</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(667.7191791534424, 74.28819274902344)"><g class="label" transform="translate(-51.42144012451172, -11.429397583007812)"><foreignObject width="102.84288024902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">移动/碰撞触发</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(284.0162010192871, 295.72337341308594)"><g class="label" transform="translate(-48.00347137451172, -11.429397583007812)"><foreignObject width="96.00694274902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">触发音频切换</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(776.6818513870239, 295.72337341308594)"><g class="label" transform="translate(-32.002315521240234, -11.429397583007812)"><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">场景切换</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(841.9332246780396, 185.0057830810547)"><g class="label" transform="translate(-40.002891540527344, -11.429397583007812)"><foreignObject width="80.00578308105469" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">存档点交互</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(711.4304780960083, 240.3645782470703)"><g class="label" transform="translate(-32.002315521240234, -11.429397583007812)"><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">触发音效</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default default flowchart-label" id="flowchart-block1-0" data-node="true" data-id="block1" transform="translate(379.10806941986084, 18.929397583007812)"><rect class="basic label-container" style="" rx="0" ry="0" x="-55.50347137451172" y="-18.929397583007812" width="111.00694274902344" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-48.00347137451172, -11.429397583007812)"><rect></rect><foreignObject width="96.00694274902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">玩家控制模块</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block2-1" data-node="true" data-id="block2" transform="translate(284.0162010192871, 240.3645782470703)"><rect class="basic label-container" style="" rx="0" ry="0" x="-55.50347137451172" y="-18.929397583007812" width="111.00694274902344" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-48.00347137451172, -11.429397583007812)"><rect></rect><foreignObject width="96.00694274902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">场景管理模块</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block3-2" data-node="true" data-id="block3" transform="translate(449.36559200286865, 129.64698791503906)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">存档系统</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block4-3" data-node="true" data-id="block4" transform="translate(711.4304780960083, 129.64698791503906)"><rect class="basic label-container" style="" rx="0" ry="0" x="-95.50274658203125" y="-18.929397583007812" width="191.0054931640625" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-88.00274658203125, -11.429397583007812)"><rect></rect><foreignObject width="176.0054931640625" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">物理引擎与碰撞检测模块</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block5-4" data-node="true" data-id="block5" transform="translate(208.01214981079102, 351.08216857910156)"><rect class="basic label-container" style="" rx="0" ry="0" x="-79.5015869140625" y="-18.929397583007812" width="159.003173828125" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-72.0015869140625, -11.429397583007812)"><rect></rect><foreignObject width="144.003173828125" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">音效与视觉效果模块</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block6-5" data-node="true" data-id="block6" transform="translate(835.1826448440552, 351.08216857910156)"><rect class="basic label-container" style="" rx="0" ry="0" x="-31.82725715637207" y="-18.929397583007812" width="63.65451431274414" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-24.32725715637207, -11.429397583007812)"><rect></rect><foreignObject width="48.65451431274414" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">UI模块</span></div></foreignObject></g></g></g></g></g><text x="440.96807861328125" y="-25" class="flowchartTitleText">体系结构图</text></svg></div><h3 id='32-模块说明'><span>3.2 </span><strong><span>模块说明</span></strong></h3><h4 id='321-玩家控制模块'><span>3.2.1 玩家控制模块</span></h4><ul><li><p><strong><span>功能描述</span></strong><span>：处理玩家输入（键盘、鼠标等）并将其转化为角色的动作，如移动、跳跃、冲刺等。</span></p></li><li><p><strong><span>关键类与方法</span></strong><span>：</span></p><ul><li><p><code>PlayerMovement</code><span>: 管理角色的运动状态、跳跃、冲刺等。</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>float g</code><span>: 角色重力加速度;</span></p></li><li><p><code>float DashReadyHeight</code><span>: 冲刺准备阶段上升高度;</span></p></li><li><p><code>float DashLength</code><span>: 冲刺距离;</span></p></li><li><p><code>int DashTimes</code><span>: 可连续冲刺次数;</span></p></li><li><p><code>LayerMask Platform</code><span>: 悬浮平台图层,用于平台检测部分;</span></p></li><li><p><code>float CheckLength</code><span>: 判定距离使用的对标小量;</span></p></li><li><p><code>float movespeed</code><span>: 角色移动速度;</span></p></li><li><p><code>float jumpHeight</code><span>: 角色弹跳力度;</span></p></li><li><p><code>LayerMask Ground</code><span>: 地板图层,用于平台检测部分;</span></p></li><li><p><code>LayerMask MoveBlock</code><span>: 用于可交互地形组件检测;</span></p></li><li><p><code>AudioSource JumpEffectSound</code><span>: 跳跃音效;</span></p></li><li><p><code>AudioSource CrushEffectSound</code><span>: 碰撞音效,特指冲刺造成的碰撞;</span></p></li><li><p><code>int AirJump</code><span>: 可空跳次数;</span></p></li><li><p><code>int DashState</code><span>: 冲刺状态,有未冲刺(0 </span><code>Dashstate.idelDash</code><span>),冲刺准备(1 </span><code>Dashstate.ready</code><span>),冲刺中(2 </span><code>Dashstate.dash</code><span>)三种状态;</span></p></li><li><p><code>int energy</code><span>: 角色能量值,用于二段跳与冲刺的升级判定;</span></p></li><li><p><code>DashDirection Ddirection</code><span>: 冲刺方向,用于碰撞方向识别,有上,下,左,右四个方向;</span></p></li><li><p><code>float dirX</code><span>: 获取的输入端设备横坐标值,用于左右移动速度赋值;</span></p></li><li><p><code>Vector2 dashTargetPoint</code><span>: 冲刺目标点,用于控制角色进行冲刺移动,判定冲刺是否完整结束的依据之一.</span></p></li></ul></li><li><p><strong><span>方法</span></strong><span>:</span></p><ul><li><p><code>UpdateState()</code><span>: 用于更新角色运动状态,对于动画的参数进行设定,控制角色动画,精灵图的渲染,对于角色状态进行判断赋值;</span></p></li><li><p><code>CanDash()</code><span>: 用于判定是否可以进行冲刺,可以返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>CanMove()</code><span>: 用于判定是否可以进行移动,可以返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>CanJump()</code><span>: 用于判定是否可以进行跳跃,可以返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>CanAirJump()</code><span>: 用于判定是否可以进行空跳,可以返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>OnGround()</code><span>: 用于判定是否处于地板上,是返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>OnPlatform()</code><span>: 用于判定是否处于悬浮平台上,是返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>DashReady()</code><span>: 在角色处于冲刺准备/冲刺中的冲刺状态时控制角色的移动;</span></p></li><li><p><code>DashReadyStop()</code><span>: 用于判定是否冲刺准备结束,结束返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>DashOver()</code><span>: 用于判定是否冲刺/冲刺准备结束,结束返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>FromDashToNormal()</code><span>: 用于将角色运动状态从冲刺恢复为未冲刺状态,为物理引擎与碰撞检测模块提供角色状态控制接口;</span></p></li><li><p><code>CrushBorder()</code><span>: 用于判定角色是否碰撞到移动边界,是返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>CrushMoveBlock()</code><span>: 用于判定角色是否碰撞移动方块,是返回</span><code>true</code><span>,反之返回</span><code>false</code><span>;</span></p></li><li><p><code>ResolveAirJump()</code><span>: 用于将角色运动状态从不可空调恢复为可空跳;</span></p></li><li><p><code>GetDashDirection()</code><span>: 返回角色冲刺方向,为物理引擎与碰撞检测模块提供方向获取接口;</span></p></li><li><p><code>SavePlayerData()</code><span>: 储存当前角色运动模块的数据,用于数据读档,为存档系统提供存档支持;</span></p></li></ul></li></ul></li><li><p><code>PlayerSettings</code><span>: 处理角色的状态管理，如保存点设置、与游戏环境的交互等。</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>GameObject Camera</code><span>: 相机物体;</span></p></li><li><p><code>GameObject Player</code><span>: 角色物体;</span></p></li><li><p><code>Vector3 Home</code><span>: </span><code>PlayerSpawn</code><span>角色重生点;</span></p></li><li><p><code>Vector3 HomeCamera</code><span>: </span><code>CameraSpawn</code><span>相机重生点;</span></p></li><li><p><code>bool InSave</code><span>: 记录角色是否处于可存档区域;</span></p></li><li><p><code>bool InTool</code><span>: 记录角色是否处于可交互区域;</span></p></li><li><p><code>GameObject Light</code><span>: 全局光源,用于光效控制;</span></p></li><li><p><code>GameObject BlackLine</code><span>: 提示用黑条,用于存档提示;</span></p></li><li><p><code>TMP_Text Text</code><span>: 提示文字,用于存档提示;</span></p></li></ul></li><li><p><strong><span>方法</span></strong><span>:</span></p><ul><li><p><code>Restart()</code><span>: 使得角色复活,重新继续游戏;</span></p></li><li><p><code>Save()</code><span>: 用于游戏存档, 为存档系统提供存档支持;</span></p></li><li><p><code>Resolve()</code><span>: 用于将全局光源渐进式恢复默认值,使得光效切换平滑;</span></p></li><li><p><code>ResolveCanvas()</code><span>: 用于将提示文字和提示用黑条渐进式淡出游戏界面,使得提示弹出与消失动画平滑;</span></p></li><li><p><code>GetPlayerSpawn()</code><span>: 获取角色重生点,为存档系统提供存档数据读取接口;</span></p></li><li><p><code>GetCameraSpawn()</code><span>: 获取相机重生点,为存档系统提供存档数据读取接口;</span></p></li><li><p><code>SaveData()</code><span>: 储存角色数据,为存档系统提供存档接口.</span></p></li></ul></li></ul></li><li><p><code>PlayerEnergy</code><span>: 处理角色能力的升级,实现技能物品的获取.</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>GameObject Light</code><span>: 全局光源,用于光效控制;</span></p></li><li><p><code>float Speed</code><span>: 全局光效闪烁效果速度.</span></p></li></ul></li><li><p><strong><span>方法</span></strong><span>:</span></p><ul><li><p><code>shine()</code><span>: 闪烁光效;</span></p></li><li><p><code>Resolve()</code><span>: 用于将全局光源渐进式恢复默认值,使得光效切换平滑;</span></p></li></ul></li></ul></li></ul></li><li><p><strong><span>接口设计</span></strong><span>：与物理引擎、输入管理,存档模块交互，实现角色的运动逻辑。</span></p></li></ul><h4 id='322-场景管理模块'><span>3.2.2 场景管理模块</span></h4><ul><li><p><strong><span>功能描述</span></strong><span>：管理不同场景之间的切换，控制场景内物体的加载与卸载。</span></p></li><li><p><strong><span>关键类与方法</span></strong><span>：</span></p><ul><li><p><code>SceneManager</code><span>: Unity内置的场景管理类，负责场景加载、切换。</span></p></li><li><p><code>Trans</code><span>: 自定义场景切换逻辑，处理跨场景的数据保持。</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>int world</code><span>: 指定待传送去往的世界序号;</span></p></li><li><p><code>int NowWorld</code><span>: 指定当前世界序号;</span></p></li><li><p><code>GameObject Player</code><span>: 指定被传送的角色对象;</span></p></li><li><p><code>bool InBed</code><span>: 是否在传送区域内;</span></p></li><li><p><code>string[] worldName</code><span>: 世界名称列表,用于世界序号与名称的映射;</span></p></li></ul></li><li><p><strong><span>方法</span></strong><span>:</span></p><ul><li><p><code>transfer()</code><span>: 传送函数,提供世界传送和数据保留支持;</span></p></li><li><p><code>Hide(Scene scene)</code><span>: 隐藏函数,用于禁用原始世界UI组件,避免冲突, 参数</span><code>Scene scene</code><span>为待隐场景;</span></p></li><li><p><code>Display(Scene scene)</code><span>: 展示场景函数,用于显示指定的场景</span><code>Scene scene</code><span>;</span></p></li><li><p><code>FallAsleep()</code><span>: 控制角色入睡动画;</span></p></li><li><p><code>wake()</code><span>: 控制角色苏醒动画;</span></p></li></ul></li></ul></li></ul></li><li><p><strong><span>接口设计</span></strong><span>：与玩家控制模块、存档系统交互，确保场景切换的平滑性和数据一致性。</span></p></li></ul><h4 id='323-存档系统'><span>3.2.3 存档系统</span></h4><ul><li><p><strong><span>功能描述</span></strong><span>：保存和加载玩家的游戏进度，包括角色位置、已完成的关卡、收集的物品等。</span></p></li><li><p><strong><span>关键类与方法</span></strong><span>：</span></p><ul><li><p><code>PlayerPrefs</code><span>: Unity内置的本地存储系统，用于保存简单的键值对数据。</span></p></li><li><p><code>Save</code><span>: 处理存档点的交互逻辑。</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>GameObject Player</code><span>: 角色物体,被存储对象.</span></p></li></ul></li></ul></li><li><p><code>CheckEnd</code><span>: 检查游戏的通关条件并保存相关状态。</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>Int SecretItem</code><span>: 角色获取的秘密物品数量;</span></p></li><li><p><code>GameObject EndBed</code><span>: 结束传送点床;</span></p></li><li><p><code>bool GreenPass</code><span>: 绿色世界是否通关;</span></p></li><li><p><code>bool WhitePass</code><span>: 白色世界是否通关;</span></p></li><li><p><code>bool RedPass</code><span>: 红色世界是否通关;</span></p></li><li><p><code>bool CanEnd</code><span>: 是否可结束游戏;</span></p></li></ul></li><li><p><strong><span>方法</span></strong><span>:</span></p><ul><li><p><code>end()</code><span>: 激活结束传送点;</span></p></li><li><p><code>SetPass(int world)</code><span>: 设置指定世界通关状态;</span></p></li><li><p><code>SavePassData()</code><span>: 储存世界通关数据,为存档系统提供接口;</span></p></li><li><p><code>SaveWorldData()</code><span>: 储存当前世界显示状态,为存档系统提供接口;</span></p></li></ul></li></ul></li></ul></li><li><p><strong><span>接口设计</span></strong><span>：与玩家控制模块、场景管理模块交互，确保游戏进度保存和恢复的准确性。</span></p></li></ul><h4 id='324-物理引擎与碰撞检测模块'><span>3.2.4 物理引擎与碰撞检测模块</span></h4><ul><li><p><strong><span>功能描述</span></strong><span>：处理游戏中的物理行为，如角色的重力、碰撞检测、物体的运动状态等。</span></p></li><li><p><strong><span>关键类与方法</span></strong><span>：</span></p><ul><li><p><code>Rigidbody2D</code><span>: Unity的2D物理引擎组件，用于处理物体的物理属性。</span></p></li><li><p><code>BoxCollider2D</code><span>: 处理物体的碰撞检测。</span></p></li><li><p><code>CanPush</code><span>, </span><code>Crush</code><span>, </span><code>Spike</code><span>: 自定义物体交互与碰撞处理逻辑。</span></p></li><li><p><code>CanPush</code><span>: 实现按钮可交互功能;</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>GameObject Player</code><span>: 可交互角色对象;</span></p></li><li><p><code>GameObject[] Doors</code><span>: 按钮绑定的机关门;</span></p></li><li><p><code>AudioSource DoorOpenEffectSound</code><span>: 机关门开启音效;</span></p></li><li><p><code>AudioSource CrushEffectSound</code><span>: 碰撞音效;</span></p></li></ul></li><li><p><strong><span>方法</span></strong><span>:</span></p><ul><li><p><code>Active()</code><span>: 开启绑定的机关门;</span></p></li><li><p><code>GetDoorNum()</code><span>; 返回绑定门的数量,为存档系统提供接口;</span></p></li><li><p><code>OpenDoor(int i)</code><span>: 开启指定机关门;为存档系统的档案恢复提供接口;</span></p></li></ul></li></ul></li><li><p><code>Crush</code><span>: 移动方块碰撞控制引擎;</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>AudioSource CrushEffectSound</code><span>: 碰撞音效;</span></p></li><li><p><code>int MoveDirection</code><span>: 移动方块移动方向;</span></p></li><li><p><code>Vector2 MoveVelocity</code><span>: 移动方块移动速度;</span></p></li></ul></li></ul></li><li><p><code>Spike</code><span>: 地刺交互处理;</span></p></li></ul></li><li><p><strong><span>接口设计</span></strong><span>：与玩家控制模块、场景管理模块和存档系统交互，实现游戏中的物理交互逻辑和存档支持。</span></p></li></ul><h4 id='325-音效与视觉效果模块'><span>3.2.5 音效与视觉效果模块</span></h4><ul><li><p><strong><span>功能描述</span></strong><span>：管理游戏的音效播放、背景音乐以及视觉效果。</span></p></li><li><p><strong><span>关键类与方法</span></strong><span>：</span></p><ul><li><p><code>AudioSource</code><span>: Unity的音频组件，用于播放游戏中的音效。</span></p></li><li><p><code>Light2D</code><span>: Unity的2D光效组件，用于管理游戏中的光影效果。</span></p></li></ul></li><li><p><strong><span>接口设计</span></strong><span>：与场景管理模块、用户界面模块交互，确保音效和视觉效果的协调一致。</span></p></li></ul><h4 id='326-用户界面ui模块'><span>3.2.6 用户界面（UI）模块</span></h4><ul><li><p><strong><span>功能描述</span></strong><span>：管理游戏的用户界面，包括菜单、状态栏、对话框等。</span></p></li><li><p><strong><span>关键类与方法</span></strong><span>：</span></p><ul><li><p><code>Canvas</code><span>: Unity的UI画布组件，用于显示游戏的UI元素。</span></p></li><li><p><code>TMP_Text</code><span>: 文本显示组件，用于显示游戏中的对话和提示信息。</span></p></li><li><p><code>PeopleInter</code><span>, </span><code>EndNotify</code><span>: 处理游戏中的对话系统和提示信息。</span></p></li><li><p><code>PeopleInter</code><span>: 处理游戏对话系统;</span></p><ul><li><p><strong><span>属性</span></strong><span>:</span></p><ul><li><p><code>GameObject Player</code><span>: 指定可交互游戏角色对象;</span></p></li><li><p><code>GameObject Dialog</code><span>: 对话画布组件;</span></p></li><li><p><code>string[] Contents</code><span>: 对话内容;</span></p></li><li><p><code>GameObejct Notify</code><span>: 提示内容;</span></p></li><li><p><code>TMP_Text Text</code><span>: 对话文字框;</span></p></li><li><p><code>bool CanTrig</code><span>: 该交互对象是否可以交互;</span></p></li><li><p><code>bool InDialog</code><span>: 是否处于对话状态;</span></p></li><li><p><code>int index</code><span>: 对话文字显示到的字的坐标;</span></p></li><li><p><code>int number</code><span>: 对话显示到的句数;</span></p></li><li><p><code>int[] length</code><span>: 对话句子长度;</span></p></li><li><p><code>int all</code><span>: 总句数;</span></p></li></ul></li><li><p><strong><span>方法</span></strong><span>:</span></p><ul><li><p><code>StartDialog()</code><span>: 进入对话;</span></p></li><li><p><code>RunDialog()</code><span>: 进行对话;</span></p></li><li><p><code>EndDialog()</code><span>: 结束对话;</span></p></li></ul></li></ul></li></ul></li><li><p><strong><span>接口设计</span></strong><span>：与玩家控制模块、场景管理模块交互，确保用户界面的互动性和响应性。</span></p></li></ul><h2 id='4-详细设计'><span>4. </span><strong><span>详细设计</span></strong></h2><h3 id='41-玩家控制模块'><span>4.1 </span><strong><span>玩家控制模块</span></strong></h3><h4 id='411-玩家状态控制'><span>4.1.1 玩家状态控制</span></h4><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="statediagram" style="max-width: 1470.36px; margin: auto;" viewBox="0.5 -51.98147964477539 1470.357177734375 862.18115234375" role="graphics-document document" aria-roledescription="stateDiagram"><style>#mermaidChart1{font-family:sans-serif;font-size:16px;fill:var(--text-color);}#mermaidChart1 .error-icon{fill:#552222;}#mermaidChart1 .error-text{fill:#552222;stroke:#552222;}#mermaidChart1 .edge-thickness-normal{stroke-width:2px;}#mermaidChart1 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart1 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart1 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart1 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart1 .marker{fill:#666;stroke:#666;}#mermaidChart1 .marker.cross{stroke:#666;}#mermaidChart1 svg{font-family:sans-serif;font-size:16px;}#mermaidChart1 defs #statediagram-barbEnd{fill:#000;stroke:#000;}#mermaidChart1 g.stateGroup text{fill:#999;stroke:none;font-size:10px;}#mermaidChart1 g.stateGroup text{fill:#000000;stroke:none;font-size:10px;}#mermaidChart1 g.stateGroup .state-title{font-weight:bolder;fill:#111111;}#mermaidChart1 g.stateGroup rect{fill:#eee;stroke:#999;}#mermaidChart1 g.stateGroup line{stroke:#666;stroke-width:1;}#mermaidChart1 .transition{stroke:#000;stroke-width:1;fill:none;}#mermaidChart1 .stateGroup .composit{fill:#ffffff;border-bottom:1px;}#mermaidChart1 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mermaidChart1 .state-note{stroke:#999;fill:#666;}#mermaidChart1 .state-note text{fill:#fff;stroke:none;font-size:10px;}#mermaidChart1 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5;}#mermaidChart1 .edgeLabel .label rect{fill:#eee;opacity:0.5;}#mermaidChart1 .edgeLabel .label text{fill:#000000;}#mermaidChart1 .label div .edgeLabel{color:#000000;}#mermaidChart1 .stateLabel text{fill:#111111;font-size:10px;font-weight:bold;}#mermaidChart1 .node circle.state-start{fill:#222;stroke:#222;}#mermaidChart1 .node .fork-join{fill:#222;stroke:#222;}#mermaidChart1 .node circle.state-end{fill:hsl(0, 0%, 83.3333333333%);stroke:#ffffff;stroke-width:1.5;}#mermaidChart1 .end-state-inner{fill:#ffffff;stroke-width:1.5;}#mermaidChart1 .node rect{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart1 .node polygon{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart1 #statediagram-barbEnd{fill:#666;}#mermaidChart1 .statediagram-cluster rect{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart1 .cluster-label,#mermaidChart1 .nodeLabel{color:#111111;}#mermaidChart1 .statediagram-cluster rect.outer{rx:5px;ry:5px;}#mermaidChart1 .statediagram-state .divider{stroke:#000;}#mermaidChart1 .statediagram-state .title-state{rx:5px;ry:5px;}#mermaidChart1 .statediagram-cluster.statediagram-cluster .inner{fill:#ffffff;}#mermaidChart1 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f4f4f4;}#mermaidChart1 .statediagram-cluster .inner{rx:0;ry:0;}#mermaidChart1 .statediagram-state rect.basic{rx:5px;ry:5px;}#mermaidChart1 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#f4f4f4;}#mermaidChart1 .note-edge{stroke-dasharray:5;}#mermaidChart1 .statediagram-note rect{fill:#666;stroke:#999;stroke-width:1px;rx:0;ry:0;}#mermaidChart1 .statediagram-note rect{fill:#666;stroke:#999;stroke-width:1px;rx:0;ry:0;}#mermaidChart1 .statediagram-note text{fill:#fff;}#mermaidChart1 .statediagram-note .nodeLabel{color:#fff;}#mermaidChart1 .statediagram .edgeLabel{color:red;}#mermaidChart1 #dependencyStart,#mermaidChart1 #dependencyEnd{fill:#666;stroke:#666;stroke-width:1;}#mermaidChart1 .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart1 :root{--mermaid-alt-font-family:sans-serif;}</style><g><defs><marker id="mermaidChart1_statediagram-barbEnd" refX="19" refY="7" markerWidth="20" markerHeight="14" markerUnits="strokeWidth" orient="auto"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M652.067,22L652.067,26.167C652.067,30.333,652.067,38.667,652.067,47C652.067,55.333,652.067,63.667,652.067,67.833L652.067,72" id="edge0" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M630.653,106.523L621.552,113.151C612.451,119.778,594.249,133.033,593.89,146.302C593.531,159.571,611.015,172.854,619.757,179.495L628.5,186.137" id="edge1" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M673.481,105.484L683.487,112.285C693.493,119.085,713.505,132.687,723.51,148.714C733.516,164.741,733.516,183.194,733.516,201.647C733.516,220.1,733.516,238.553,741.873,253.851C750.23,269.149,766.945,281.292,775.302,287.364L783.659,293.435" id="edge2" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M630.653,100.168L612.835,107.854C595.017,115.541,559.382,130.915,541.564,147.828C523.746,164.741,523.746,183.194,523.746,201.647C523.746,220.1,523.746,238.553,523.746,257.006C523.746,275.459,523.746,293.912,523.746,312.365C523.746,330.818,523.746,349.27,576.44,367.202C629.134,385.133,734.521,402.542,787.215,411.246L839.908,419.951" id="edge3" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M630.653,95.735L593.107,104.16C555.561,112.586,480.469,129.437,442.923,147.089C405.377,164.741,405.377,183.194,405.377,201.647C405.377,220.1,405.377,238.553,405.377,257.006C405.377,275.459,405.377,293.912,405.377,312.365C405.377,330.818,405.377,349.27,405.377,367.723C405.377,386.176,405.377,404.629,405.377,423.082C405.377,441.535,405.377,459.988,488.339,477.925C571.302,495.862,737.228,513.283,820.19,521.993L903.153,530.704" id="edge4" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M650.796,182.718L651.4,176.646C652.003,170.574,653.209,158.431,653.555,146.288C653.901,134.145,653.386,122.002,653.128,115.93L652.87,109.859" id="edge6" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M669.331,210.095L688.226,217.913C707.121,225.732,744.911,241.369,766.769,255.259C788.626,269.149,794.552,281.292,797.515,287.364L800.477,293.435" id="edge7" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M648.915,220.576L648.915,226.648C648.915,232.72,648.915,244.863,648.915,260.161C648.915,275.459,648.915,293.912,648.915,312.365C648.915,330.818,648.915,349.27,680.748,366.89C712.58,384.51,776.244,401.297,808.076,409.691L839.908,418.084" id="edge8" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M628.5,207.462L599.51,215.719C570.52,223.977,512.541,240.491,483.551,257.975C454.561,275.459,454.561,293.912,454.561,312.365C454.561,330.818,454.561,349.27,454.561,367.723C454.561,386.176,454.561,404.629,454.561,423.082C454.561,441.535,454.561,459.988,529.327,477.872C604.092,495.756,753.622,513.071,828.388,521.728L903.153,530.385" id="edge9" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M817.296,293.435L819.727,287.364C822.159,281.292,827.022,269.149,829.454,253.851C831.886,238.553,831.886,220.1,831.886,201.647C831.886,183.194,831.886,164.741,805.485,147.387C779.084,130.033,726.283,113.777,699.882,105.65L673.481,97.522" id="edge11" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M834.114,293.435L841.94,287.364C849.766,281.292,865.418,269.149,837.954,254.662C810.491,240.176,739.911,223.345,704.621,214.93L669.331,206.515" id="edge12" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M809.714,331.294L809.714,337.366C809.714,343.437,809.714,355.58,815.105,367.723C820.495,379.867,831.276,392.01,836.667,398.081L842.057,404.153" id="edge13" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M782.542,317.281L736.076,325.688C689.61,334.095,596.678,350.909,550.212,368.543C503.746,386.176,503.746,404.629,503.746,423.082C503.746,441.535,503.746,459.988,570.314,477.807C636.882,495.625,770.017,512.809,836.585,521.402L903.153,529.994" id="edge14" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M877.818,412.649L891.421,405.162C905.025,397.674,932.233,382.699,945.836,365.985C959.44,349.27,959.44,330.818,959.44,312.365C959.44,293.912,959.44,275.459,959.44,257.006C959.44,238.553,959.44,220.1,959.44,201.647C959.44,183.194,959.44,164.741,911.78,146.931C864.12,129.121,768.801,111.954,721.141,103.37L673.481,94.786" id="edge16" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M877.818,416.076L899.619,408.017C921.42,399.958,965.022,383.841,986.823,366.556C1008.625,349.27,1008.625,330.818,1008.625,312.365C1008.625,293.912,1008.625,275.459,952.076,257.529C895.527,239.6,782.429,222.195,725.88,213.492L669.331,204.789" id="edge17" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M877.818,417.808L907.816,409.46C937.815,401.113,997.812,384.418,990.99,367.855C984.169,351.291,910.528,334.86,873.707,326.644L836.887,318.428" id="edge18" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M858.863,442.012L858.863,448.083C858.863,454.155,858.863,466.298,866.955,478.441C875.046,490.584,891.23,502.727,899.321,508.799L907.413,514.87" id="edge19" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M962.127,524.564L986.669,516.877C1011.211,509.189,1060.295,493.815,1084.837,476.902C1109.379,459.988,1109.379,441.535,1109.379,423.082C1109.379,404.629,1109.379,386.176,1109.379,367.723C1109.379,349.27,1109.379,330.818,1109.379,312.365C1109.379,293.912,1109.379,275.459,1109.379,257.006C1109.379,238.553,1109.379,220.1,1109.379,201.647C1109.379,183.194,1109.379,164.741,1036.73,146.72C964.08,128.699,818.781,111.11,746.131,102.316L673.481,93.522" id="edge21" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M962.127,526.574L994.867,518.552C1027.606,510.53,1093.085,494.485,1125.824,477.237C1158.564,459.988,1158.564,441.535,1158.564,423.082C1158.564,404.629,1158.564,386.176,1158.564,367.723C1158.564,349.27,1158.564,330.818,1158.564,312.365C1158.564,293.912,1158.564,275.459,1077.025,257.375C995.486,239.292,832.409,221.578,750.87,212.721L669.331,203.865" id="edge22" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M962.127,527.866L1003.064,519.629C1044.001,511.391,1125.875,494.916,1166.812,477.452C1207.749,459.988,1207.749,441.535,1207.749,423.082C1207.749,404.629,1207.749,386.176,1145.938,368.353C1084.128,350.53,960.507,333.337,898.697,324.74L836.887,316.144" id="edge23" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M962.127,528.766L1011.262,520.379C1060.396,511.991,1158.665,495.216,1144.613,478.041C1130.562,460.867,1004.19,443.292,941.004,434.505L877.818,425.718" id="edge24" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M630.653,92.935L535.725,101.827C440.796,110.72,250.94,128.504,156.012,146.623C61.083,164.741,61.083,183.194,61.083,201.647C61.083,220.1,61.083,238.553,61.083,257.006C61.083,275.459,61.083,293.912,61.083,312.365C61.083,330.818,61.083,349.27,61.083,367.723C61.083,386.176,61.083,404.629,61.083,423.082C61.083,441.535,61.083,459.988,61.083,478.441C61.083,496.894,61.083,515.347,61.083,533.8C61.083,552.253,61.083,570.706,71.857,586.004C82.63,601.302,104.177,613.445,114.951,619.516L125.724,625.588" id="edge5" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M628.5,203.745L542.128,212.622C455.756,221.499,283.012,239.252,196.64,257.355C110.268,275.459,110.268,293.912,110.268,312.365C110.268,330.818,110.268,349.27,110.268,367.723C110.268,386.176,110.268,404.629,110.268,423.082C110.268,441.535,110.268,459.988,110.268,478.441C110.268,496.894,110.268,515.347,110.268,533.8C110.268,552.253,110.268,570.706,118.648,586.004C127.027,601.302,143.786,613.445,152.165,619.516L160.544,625.588" id="edge10" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M782.542,314.678L678.694,323.519C574.846,332.36,367.149,350.042,263.301,368.109C159.453,386.176,159.453,404.629,159.453,423.082C159.453,441.535,159.453,459.988,159.453,478.441C159.453,496.894,159.453,515.347,159.453,533.8C159.453,552.253,159.453,570.706,165.438,586.004C171.423,601.302,183.394,613.445,189.379,619.516L195.364,625.588" id="edge15" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M839.908,424.696L734.697,433.653C629.485,442.611,419.061,460.526,313.849,478.71C208.638,496.894,208.638,515.347,208.638,533.8C208.638,552.253,208.638,570.706,212.229,586.004C215.82,601.302,223.002,613.445,226.593,619.516L230.185,625.588" id="edge20" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M903.153,536.219L795.598,545.042C688.043,553.865,472.933,571.512,366.575,586.407C260.217,601.302,262.611,613.445,263.808,619.516L265.005,625.588" id="edge25" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M299.825,625.588L301.022,619.516C302.219,613.445,304.613,601.302,305.81,586.004C307.007,570.706,307.007,552.253,307.007,533.8C307.007,515.347,307.007,496.894,307.007,478.441C307.007,459.988,307.007,441.535,307.007,423.082C307.007,404.629,307.007,386.176,307.007,367.723C307.007,349.27,307.007,330.818,307.007,312.365C307.007,293.912,307.007,275.459,307.007,257.006C307.007,238.553,307.007,220.1,307.007,201.647C307.007,183.194,307.007,164.741,360.948,146.861C414.889,128.98,522.771,111.673,576.712,103.019L630.653,94.365" id="edge26" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M334.645,625.588L338.236,619.516C341.827,613.445,349.01,601.302,352.601,586.004C356.192,570.706,356.192,552.253,356.192,533.8C356.192,515.347,356.192,496.894,356.192,478.441C356.192,459.988,356.192,441.535,356.192,423.082C356.192,404.629,356.192,386.176,356.192,367.723C356.192,349.27,356.192,330.818,356.192,312.365C356.192,293.912,356.192,275.459,401.577,257.649C446.961,239.84,537.73,222.674,583.115,214.091L628.5,205.508" id="edge27" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M556.83,681.384L686.575,666.013C816.321,650.642,1075.812,619.9,1205.557,595.303C1335.303,570.706,1335.303,552.253,1335.303,533.8C1335.303,515.347,1335.303,496.894,1335.303,478.441C1335.303,459.988,1335.303,441.535,1335.303,423.082C1335.303,404.629,1335.303,386.176,1252.234,368.2C1169.164,350.224,1003.025,332.725,919.956,323.976L836.887,315.227" id="edge28" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M556.83,682.835L694.773,667.222C832.716,651.609,1108.602,620.384,1246.545,595.545C1384.488,570.706,1384.488,552.253,1384.488,533.8C1384.488,515.347,1384.488,496.894,1300.043,478.774C1215.598,460.653,1046.708,442.866,962.263,433.972L877.818,425.078" id="edge29" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M556.83,684.162L702.97,668.328C849.111,652.494,1141.391,620.826,1208.941,596.309C1276.491,571.792,1119.309,554.425,1040.718,545.741L962.127,537.058" id="edge30" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(576.0465240478516, 146.28819274902344)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=1</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(733.5161437988281, 201.64698791503906)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=2</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(523.7461767196655, 257.0057830810547)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=3</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(405.3766736984253, 312.3645782470703)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=4</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(654.4160270690918, 146.28819274902344)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(782.7008953094482, 257.0057830810547)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=2</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(648.915449142456, 312.3645782470703)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=3</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(454.5614252090454, 367.72337341308594)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=4</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(831.8856468200684, 201.64698791503906)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(881.0703983306885, 257.0057830810547)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=1</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(809.7144212722778, 367.72337341308594)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=3</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(503.7461767196655, 423.08216857910156)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=4</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(959.4399013519287, 257.0057830810547)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1008.6246528625488, 312.3645782470703)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=1</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1057.809404373169, 367.72337341308594)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=2</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(858.8630046844482, 478.4409637451172)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=4</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1109.379137992859, 312.3645782470703)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1158.563889503479, 367.72337341308594)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=1</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1207.7486410140991, 423.08216857910156)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=2</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1256.9333925247192, 478.4409637451172)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=3</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(61.08341312408447, 367.72337341308594)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=5</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(110.26816463470459, 423.08216857910156)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=5</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(159.4529161453247, 478.4409637451172)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=5</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(208.63766765594482, 533.7997589111328)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=5</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(257.82241916656494, 589.1585540771484)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=5</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(307.00717067718506, 367.72337341308594)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(356.1919221878052, 423.08216857910156)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=1</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1335.3028955459595, 478.4409637451172)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=2</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1384.4876470565796, 533.7997589111328)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=3</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1433.6723985671997, 589.1585540771484)"><g class="label" transform="translate(-29.184751510620117, -11.429397583007812)"><rect rx="0" ry="0" width="58.369503021240234" height="22.858795166015625"></rect><foreignObject width="58.369503021240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">state=4</span></div></foreignObject></g></g></g><g class="nodes"><g class="node  statediagram-state undefined" id="state-Idel-26" data-node="true" data-id="Idel" transform="translate(652.0672130584717, 90.92939758300781)"><rect class="basic label-container" style="" x="-21.414206504821777" y="-18.929397583007812" width="42.828413009643555" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-13.914206504821777, -11.429397583007812)"><rect></rect><foreignObject width="27.828413009643555" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">idel</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-Run-27" data-node="true" data-id="Run" transform="translate(648.915449142456, 201.64698791503906)"><rect class="basic label-container" style="" x="-20.415943145751953" y="-18.929397583007812" width="40.831886291503906" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-12.915943145751953, -11.429397583007812)"><rect></rect><foreignObject width="25.831886291503906" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">run</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-Jump-28" data-node="true" data-id="Jump" transform="translate(809.7144212722778, 312.3645782470703)"><rect class="basic label-container" style="" x="-27.17230796813965" y="-18.929397583007812" width="54.3446159362793" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-19.67230796813965, -11.429397583007812)"><rect></rect><foreignObject width="39.3446159362793" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">jump</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-Fall-29" data-node="true" data-id="Fall" transform="translate(858.8630046844482, 423.08216857910156)"><rect class="basic label-container" style="" x="-18.954716682434082" y="-18.929397583007812" width="37.909433364868164" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-11.454716682434082, -11.429397583007812)"><rect></rect><foreignObject width="22.909433364868164" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">fall</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-Death-30" data-node="true" data-id="Death" transform="translate(932.6401319503784, 533.7997589111328)"><rect class="basic label-container" style="" x="-29.487123489379883" y="-18.929397583007812" width="58.974246978759766" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-21.987123489379883, -11.429397583007812)"><rect></rect><foreignObject width="43.974246978759766" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">death</span></div></foreignObject></g></g><g class="root" transform="translate(0.5, 617.5879516601562)"><g class="clusters"><g class=" statediagram-state statediagram-cluster " id="Dash"><rect class="outer" x="8" y="8" width="548.8295555114746" height="176.61168670654297"></rect><g class="cluster-label" transform="translate(264.2434825897217, 8)"><foreignObject width="36.34259033203125" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">dash</span></div></foreignObject></g><rect class="inner" x="8" y="29.858795166015625" width="548.8295555114746" height="150.75289154052734"></rect></g></g><g class="edgePaths"><path d="M318.915,65.136L332.594,62.727C346.273,60.317,373.63,55.498,399.53,59.032C425.431,62.566,449.874,74.453,462.095,80.396L474.317,86.339" id="edge31" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M474.317,112.044L462.095,117.026C449.874,122.007,425.431,131.97,392.933,136.951C360.435,141.932,319.882,141.932,279.33,141.932C238.777,141.932,198.224,141.932,165.726,137.347C133.229,132.761,108.786,123.591,96.564,119.005L84.343,114.42" id="edge32" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M84.343,96.314L96.564,92.28C108.786,88.246,133.229,80.177,159.129,76.143C185.029,72.109,212.387,72.109,226.065,72.109L239.744,72.109" id="edge33" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path><path d="M474.317,98.412L462.095,97.6C449.874,96.787,425.431,95.163,399.53,91.941C373.63,88.719,346.273,83.9,332.594,81.491L318.915,79.082" id="edge34" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart1_statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(400.98754501342773, 50.67939758300781)"><g class="label" transform="translate(-48.3289909362793, -11.429397583007812)"><rect rx="0" ry="0" width="96.6579818725586" height="22.858795166015625"></rect><foreignObject width="96.6579818725586" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Dashstate=1</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(279.32956314086914, 141.93228912353516)"><g class="label" transform="translate(-48.3289909362793, -11.429397583007812)"><rect rx="0" ry="0" width="96.6579818725586" height="22.858795166015625"></rect><foreignObject width="96.6579818725586" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Dashstate=2</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(157.67158126831055, 72.10879516601562)"><g class="label" transform="translate(-48.3289909362793, -11.429397583007812)"><rect rx="0" ry="0" width="96.6579818725586" height="22.858795166015625"></rect><foreignObject width="96.6579818725586" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Dashstate=0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(400.98754501342773, 93.53819274902344)"><g class="label" transform="translate(-48.3289909362793, -11.429397583007812)"><rect rx="0" ry="0" width="96.6579818725586" height="22.858795166015625"></rect><foreignObject width="96.6579818725586" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Dashstate=0</span></div></foreignObject></g></g></g><g class="nodes"><g class="node  statediagram-state undefined" id="state-dash-33" data-node="true" data-id="dash" transform="translate(58.671295166015625, 104.78819274902344)"><rect class="basic label-container" style="" x="-25.671295166015625" y="-18.929397583007812" width="51.34259033203125" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-18.171295166015625, -11.429397583007812)"><rect></rect><foreignObject width="36.34259033203125" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">dash</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-ideldash-34" data-node="true" data-id="ideldash" transform="translate(279.32956314086914, 72.10879516601562)"><rect class="basic label-container" style="" x="-39.58550262451172" y="-18.929397583007812" width="79.17100524902344" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.08550262451172, -11.429397583007812)"><rect></rect><foreignObject width="64.17100524902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ideldash</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-ready-34" data-node="true" data-id="ready" transform="translate(503.0730457305908, 100.32349395751953)"><rect class="basic label-container" style="" x="-28.75650978088379" y="-18.929397583007812" width="57.51301956176758" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-21.25650978088379, -11.429397583007812)"><rect></rect><foreignObject width="42.51301956176758" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ready</span></div></foreignObject></g></g></g></g><g class="node default" id="state-root_start-0" data-node="true" data-id="root_start" transform="translate(652.0672130584717, 15)"><circle class="state-start" r="7" width="14" height="14"></circle></g></g></g></g><text x="735.6785888671875" y="-25" class="statediagramTitleText">角色状态转换图</text></svg></div><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart2" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="statediagram" style="max-width: 1052.06px; margin: auto;" viewBox="0.5 -51.98147964477539 1052.05712890625 1038.2870483398438" role="graphics-document document" aria-roledescription="stateDiagram"><style>#mermaidChart2{font-family:sans-serif;font-size:16px;fill:var(--text-color);}#mermaidChart2 .error-icon{fill:#552222;}#mermaidChart2 .error-text{fill:#552222;stroke:#552222;}#mermaidChart2 .edge-thickness-normal{stroke-width:2px;}#mermaidChart2 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart2 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart2 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart2 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart2 .marker{fill:#666;stroke:#666;}#mermaidChart2 .marker.cross{stroke:#666;}#mermaidChart2 svg{font-family:sans-serif;font-size:16px;}#mermaidChart2 defs #statediagram-barbEnd{fill:#000;stroke:#000;}#mermaidChart2 g.stateGroup text{fill:#999;stroke:none;font-size:10px;}#mermaidChart2 g.stateGroup text{fill:#000000;stroke:none;font-size:10px;}#mermaidChart2 g.stateGroup .state-title{font-weight:bolder;fill:#111111;}#mermaidChart2 g.stateGroup rect{fill:#eee;stroke:#999;}#mermaidChart2 g.stateGroup line{stroke:#666;stroke-width:1;}#mermaidChart2 .transition{stroke:#000;stroke-width:1;fill:none;}#mermaidChart2 .stateGroup .composit{fill:#ffffff;border-bottom:1px;}#mermaidChart2 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mermaidChart2 .state-note{stroke:#999;fill:#666;}#mermaidChart2 .state-note text{fill:#fff;stroke:none;font-size:10px;}#mermaidChart2 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5;}#mermaidChart2 .edgeLabel .label rect{fill:#eee;opacity:0.5;}#mermaidChart2 .edgeLabel .label text{fill:#000000;}#mermaidChart2 .label div .edgeLabel{color:#000000;}#mermaidChart2 .stateLabel text{fill:#111111;font-size:10px;font-weight:bold;}#mermaidChart2 .node circle.state-start{fill:#222;stroke:#222;}#mermaidChart2 .node .fork-join{fill:#222;stroke:#222;}#mermaidChart2 .node circle.state-end{fill:hsl(0, 0%, 83.3333333333%);stroke:#ffffff;stroke-width:1.5;}#mermaidChart2 .end-state-inner{fill:#ffffff;stroke-width:1.5;}#mermaidChart2 .node rect{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart2 .node polygon{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart2 #statediagram-barbEnd{fill:#666;}#mermaidChart2 .statediagram-cluster rect{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart2 .cluster-label,#mermaidChart2 .nodeLabel{color:#111111;}#mermaidChart2 .statediagram-cluster rect.outer{rx:5px;ry:5px;}#mermaidChart2 .statediagram-state .divider{stroke:#000;}#mermaidChart2 .statediagram-state .title-state{rx:5px;ry:5px;}#mermaidChart2 .statediagram-cluster.statediagram-cluster .inner{fill:#ffffff;}#mermaidChart2 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f4f4f4;}#mermaidChart2 .statediagram-cluster .inner{rx:0;ry:0;}#mermaidChart2 .statediagram-state rect.basic{rx:5px;ry:5px;}#mermaidChart2 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#f4f4f4;}#mermaidChart2 .note-edge{stroke-dasharray:5;}#mermaidChart2 .statediagram-note rect{fill:#666;stroke:#999;stroke-width:1px;rx:0;ry:0;}#mermaidChart2 .statediagram-note rect{fill:#666;stroke:#999;stroke-width:1px;rx:0;ry:0;}#mermaidChart2 .statediagram-note text{fill:#fff;}#mermaidChart2 .statediagram-note .nodeLabel{color:#fff;}#mermaidChart2 .statediagram .edgeLabel{color:red;}#mermaidChart2 #dependencyStart,#mermaidChart2 #dependencyEnd{fill:#666;stroke:#666;stroke-width:1;}#mermaidChart2 .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart2 :root{--mermaid-alt-font-family:sans-serif;}</style><g><defs><marker id="mermaidChart2_statediagram-barbEnd" refX="19" refY="7" markerWidth="20" markerHeight="14" markerUnits="strokeWidth" orient="auto"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M605.225,15.825L561.139,21.021C517.054,26.217,428.882,36.608,384.796,45.971C340.711,55.333,340.711,63.667,340.711,67.833L340.711,72" id="edge35" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M619.225,15.825L663.311,21.021C707.396,26.217,795.568,36.608,839.654,105.186C883.739,173.765,883.739,300.529,883.739,363.912L883.739,427.294" id="edge51" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="root" transform="translate(0.5, 64)"><g class="clusters"><g class=" statediagram-state statediagram-cluster " id="State2"><rect class="outer" x="8" y="8" width="665.421422958374" height="906.3055419921875"></rect><g class="cluster-label" transform="translate(321.51221561431885, 8)"><foreignObject width="38.39699172973633" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">State</span></div></foreignObject></g><rect class="inner" x="8" y="29.858795166015625" width="665.421422958374" height="880.4467468261719"></rect></g></g><g class="edgePaths"><path d="M295.661,41.728L268.384,48.679C241.107,55.629,186.554,69.529,159.277,82.551C132,95.573,132,107.716,132,113.787L132,119.859" id="edge36" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M132,157.718L132,163.789C132,169.861,132,182.004,132,229.421C132,276.839,132,359.531,132,400.877L132,442.223" id="edge37" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M308.737,43.065L322.551,49.792C336.365,56.52,363.992,69.975,377.806,83.595C391.62,97.216,391.62,111.002,391.62,117.895L391.62,124.788" id="edge38" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M379.272,145.386L364.063,153.513C348.854,161.64,318.437,177.893,303.228,226.2C288.019,274.506,288.019,354.865,288.019,395.044L288.019,435.223" id="edge45" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M280.785,461.209L256.33,501.724C231.875,542.239,182.965,623.27,158.51,669.856C134.055,716.443,134.055,728.586,134.055,734.658L134.055,740.729" id="edge46" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M288.019,463.223L288.019,503.403C288.019,543.582,288.019,623.941,288.019,670.192C288.019,716.443,288.019,728.586,288.019,734.658L288.019,740.729" id="edge47" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M295.46,461.082L320.896,501.618C346.332,542.155,397.204,623.227,422.64,670.657C448.075,718.086,448.075,731.872,448.075,738.765L448.075,745.659" id="edge48" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M435.024,764.725L413.431,773.107C391.837,781.489,348.65,798.253,327.056,812.707C305.463,827.16,305.463,839.304,305.463,845.375L305.463,851.447" id="edge49" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M457.013,770.434L463.176,777.865C469.339,785.295,481.665,800.156,487.828,813.658C493.991,827.16,493.991,839.304,493.991,845.375L493.991,851.447" id="edge50" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M405.62,146.269L420.553,154.249C435.487,162.228,465.353,178.188,480.287,192.239C495.22,206.29,495.22,218.433,495.22,224.505L495.22,230.576" id="edge39" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(132.0002899169922, 83.42939758300781)"><g class="label" transform="translate(-104.00028991699219, -11.429397583007812)"><rect rx="0" ry="0" width="208.00059509277344" height="22.858795166015625"></rect><foreignObject width="208.00057983398438" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">物理引擎和碰撞处理模块触发</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(132.0002899169922, 194.14698791503906)"><g class="label" transform="translate(-32.255496978759766, -11.429397583007812)"><rect rx="0" ry="0" width="64.51099395751953" height="22.858795166015625"></rect><foreignObject width="64.51099395751953" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Restart()</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(391.6197338104248, 83.42939758300781)"><g class="label" transform="translate(-54.35112762451172, -11.429397583007812)"><rect rx="0" ry="0" width="108.70225524902344" height="22.858795166015625"></rect><foreignObject width="108.70225524902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">State != death</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(288.0191707611084, 194.14698791503906)"><g class="label" transform="translate(-81.43084716796875, -11.429397583007812)"><rect rx="0" ry="0" width="162.8616943359375" height="22.858795166015625"></rect><foreignObject width="162.8616943359375" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Dashstate = idelDash</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(134.0546875, 704.2997589111328)"><g class="label" transform="translate(-50.242332458496094, -11.429397583007812)"><rect rx="0" ry="0" width="100.48467254638672" height="22.858795166015625"></rect><foreignObject width="100.48466491699219" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">velocity.y &gt; 0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(288.0191707611084, 704.2997589111328)"><g class="label" transform="translate(-50.242332458496094, -11.429397583007812)"><rect rx="0" ry="0" width="100.48467254638672" height="22.858795166015625"></rect><foreignObject width="100.48466491699219" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">velocity.y &lt; 0</span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(305.46277236938477, 815.0173492431641)"><g class="label" transform="translate(-33.32248306274414, -11.429397583007812)"><rect rx="0" ry="0" width="66.64496612548828" height="22.858795166015625"></rect><foreignObject width="66.64496612548828" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">dirX != 0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(493.99055099487305, 815.0173492431641)"><g class="label" transform="translate(-30.823205947875977, -11.429397583007812)"><rect rx="0" ry="0" width="61.64641189575195" height="22.858795166015625"></rect><foreignObject width="61.64641189575195" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">dirX = 0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(495.2202968597412, 194.14698791503906)"><g class="label" transform="translate(-83.93012237548828, -11.429397583007812)"><rect rx="0" ry="0" width="167.86026000976562" height="22.858795166015625"></rect><foreignObject width="167.86024475097656" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Dashstate != idelDash</span></div></foreignObject></g></g></g><g class="nodes"><g class="node  statediagram-state undefined" id="state-Death-37" data-node="true" data-id="Death" transform="translate(132.0002899169922, 138.78819274902344)"><rect class="basic label-container" style="" x="-29.487123489379883" y="-18.929397583007812" width="58.974246978759766" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-21.987123489379883, -11.429397583007812)"><rect></rect><foreignObject width="43.974246978759766" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">death</span></div></foreignObject></g></g><g class="node default" id="state-State2_start-38" data-node="true" data-id="State2_start" transform="translate(302.44402503967285, 40)"><circle class="state-start" r="7" width="14" height="14"></circle></g><g class="node default" id="state-State2_end-37" data-node="true" data-id="State2_end" transform="translate(132.0002899169922, 449.22337341308594)"><circle class="state-start" r="7" width="14" height="14"></circle><circle class="state-end" r="5" width="10" height="10"></circle></g><g class="node default" id="state-if_state1-45" data-node="true" data-id="if_state1" transform="translate(391.6197338104248, 138.78819274902344)"><polygon points="0,14 14,0 0,-14 -14,0" class="state-start" r="7" width="28" height="28"></polygon></g><g class="node default" id="state-if_state2-48" data-node="true" data-id="if_state2" transform="translate(288.0191707611084, 449.22337341308594)"><polygon points="0,14 14,0 0,-14 -14,0" class="state-start" r="7" width="28" height="28"></polygon></g><g class="node  statediagram-state undefined" id="state-Jump-46" data-node="true" data-id="Jump" transform="translate(134.0546875, 759.6585540771484)"><rect class="basic label-container" style="" x="-27.17230796813965" y="-18.929397583007812" width="54.3446159362793" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-19.67230796813965, -11.429397583007812)"><rect></rect><foreignObject width="39.3446159362793" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">jump</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-Fall-47" data-node="true" data-id="Fall" transform="translate(288.0191707611084, 759.6585540771484)"><rect class="basic label-container" style="" x="-18.954716682434082" y="-18.929397583007812" width="37.909433364868164" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-11.454716682434082, -11.429397583007812)"><rect></rect><foreignObject width="22.909433364868164" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">fall</span></div></foreignObject></g></g><g class="node default" id="state-if_state3-50" data-node="true" data-id="if_state3" transform="translate(448.075475692749, 759.6585540771484)"><polygon points="0,14 14,0 0,-14 -14,0" class="state-start" r="7" width="28" height="28"></polygon></g><g class="node  statediagram-state undefined" id="state-Run-49" data-node="true" data-id="Run" transform="translate(305.46277236938477, 870.3761444091797)"><rect class="basic label-container" style="" x="-20.415943145751953" y="-18.929397583007812" width="40.831886291503906" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-12.915943145751953, -11.429397583007812)"><rect></rect><foreignObject width="25.831886291503906" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">run</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-Idel-50" data-node="true" data-id="Idel" transform="translate(493.99055099487305, 870.3761444091797)"><rect class="basic label-container" style="" x="-21.414206504821777" y="-18.929397583007812" width="42.828413009643555" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-13.914206504821777, -11.429397583007812)"><rect></rect><foreignObject width="27.828413009643555" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">idel</span></div></foreignObject></g></g><g class="root" transform="translate(344.5191707611084, 222.57638549804688)"><g class="clusters"><g class=" statediagram-state statediagram-cluster statediagram-cluster-alt" id="Dash"><rect class="outer" x="8" y="8" width="286.40227127075195" height="437.2939758300781"></rect><g class="cluster-label" transform="translate(133.02984046936035, 8)"><foreignObject width="36.34259033203125" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">dash</span></div></foreignObject></g><rect class="inner" x="8" y="29.858795166015625" width="286.40227127075195" height="411.4351806640625"></rect></g></g><g class="edgePaths"><path d="M156.182,47L156.182,51.167C156.182,55.333,156.182,63.667,156.182,72C156.182,80.333,156.182,88.667,156.182,92.833L156.182,97" id="edge40" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M134.656,134.859L127.752,140.93C120.848,147.002,107.039,159.145,100.135,174.443C93.231,189.741,93.231,208.194,93.231,226.647C93.231,245.1,93.231,263.553,100.135,278.851C107.039,294.149,120.848,306.292,127.752,312.364L134.656,318.435" id="edge41" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M156.182,356.294L156.182,360.461C156.182,364.627,156.182,372.961,156.182,381.294C156.182,389.627,156.182,397.961,156.182,402.127L156.182,406.294" id="edge42" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M177.707,134.859L184.612,140.93C191.516,147.002,205.324,159.145,212.229,171.288C219.133,183.431,219.133,195.574,219.133,201.646L219.133,207.718" id="edge43" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M219.133,245.576L219.133,251.648C219.133,257.72,219.133,269.863,212.229,282.006C205.324,294.149,191.516,306.292,184.612,312.364L177.707,318.435" id="edge44" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(93.23075866699219, 226.64698791503906)"><g class="label" transform="translate(-65.23075866699219, -11.429397583007812)"><rect rx="0" ry="0" width="130.46151733398438" height="22.858795166015625"></rect><foreignObject width="130.46151733398438" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">DashReadyStop()</span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(219.1328125, 171.28819274902344)"><g class="label" transform="translate(-54.97685241699219, -11.429397583007812)"><rect rx="0" ry="0" width="109.9537124633789" height="22.858795166015625"></rect><foreignObject width="109.95370483398438" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">GetKeyDown()</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(219.1328125, 282.0057830810547)"><g class="label" transform="translate(-42.75173568725586, -11.429397583007812)"><rect rx="0" ry="0" width="85.50347137451172" height="22.858795166015625"></rect><foreignObject width="85.50347137451172" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">DashOver()</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="state-Dash_start-40" data-node="true" data-id="Dash_start" transform="translate(156.1817855834961, 40)"><circle class="state-start" r="7" width="14" height="14"></circle></g><g class="node  statediagram-state undefined" id="state-Dashstate1-43" data-node="true" data-id="Dashstate1" transform="translate(156.1817855834961, 115.92939758300781)"><rect class="basic label-container" style="" x="-28.75650978088379" y="-18.929397583007812" width="57.51301956176758" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-21.25650978088379, -11.429397583007812)"><rect></rect><foreignObject width="42.51301956176758" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ready</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-Dashstate0-44" data-node="true" data-id="Dashstate0" transform="translate(156.1817855834961, 337.3645782470703)"><rect class="basic label-container" style="" x="-40.56206512451172" y="-18.929397583007812" width="81.12413024902344" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-33.06206512451172, -11.429397583007812)"><rect></rect><foreignObject width="66.12413024902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">idelDash</span></div></foreignObject></g></g><g class="node default" id="state-Dash_end-42" data-node="true" data-id="Dash_end" transform="translate(156.1817855834961, 413.2939758300781)"><circle class="state-start" r="7" width="14" height="14"></circle><circle class="state-end" r="5" width="10" height="10"></circle></g><g class="node  statediagram-state undefined" id="state-Dashstate2-44" data-node="true" data-id="Dashstate2" transform="translate(219.1328125, 226.64698791503906)"><rect class="basic label-container" style="" x="-25.671295166015625" y="-18.929397583007812" width="51.34259033203125" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-18.171295166015625, -11.429397583007812)"><rect></rect><foreignObject width="36.34259033203125" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">dash</span></div></foreignObject></g></g></g></g></g></g><g class="node default" id="state-root_start-51" data-node="true" data-id="root_start" transform="translate(612.2249603271484, 15)"><circle class="state-start" r="7" width="14" height="14"></circle></g><g class="root" transform="translate(715.92138671875, 419.2939758300781)"><g class="clusters"><g class=" statediagram-state statediagram-cluster " id="FlipX"><rect class="outer" x="8" y="8" width="320.63570404052734" height="195.71759033203125"></rect><g class="cluster-label" transform="translate(149.5389175415039, 8)"><foreignObject width="37.55786895751953" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">FlipX</span></div></foreignObject></g><rect class="inner" x="8" y="29.858795166015625" width="320.63570404052734" height="169.85879516601562"></rect></g></g><g class="edgePaths"><path d="M47,105.859L51.167,105.859C55.333,105.859,63.667,105.859,72,105.859C80.333,105.859,88.667,105.859,92.833,105.859L97,105.859" id="edge52" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M123.164,98.928L133.985,92.761C144.807,86.595,166.45,74.262,188.181,68.096C209.912,61.929,231.73,61.929,242.639,61.929L253.548,61.929" id="edge53" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path><path d="M123.164,112.79L133.985,118.956C144.807,125.123,166.45,137.455,187.787,143.622C209.124,149.788,230.155,149.788,240.671,149.788L251.186,149.788" id="edge54" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart2_statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(188.09317016601562, 61.92939758300781)"><g class="label" transform="translate(-38.093170166015625, -11.429397583007812)"><rect rx="0" ry="0" width="76.18634033203125" height="22.858795166015625"></rect><foreignObject width="76.18634033203125" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">if dirX &lt; 0</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(188.09317016601562, 149.78819274902344)"><g class="label" transform="translate(-38.093170166015625, -11.429397583007812)"><rect rx="0" ry="0" width="76.18634033203125" height="22.858795166015625"></rect><foreignObject width="76.18634033203125" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">if dirX &gt; 0</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="state-FlipX_start-52" data-node="true" data-id="FlipX_start" transform="translate(40, 105.85879516601562)"><circle class="state-start" r="7" width="14" height="14"></circle></g><g class="node default" id="state-if_state-54" data-node="true" data-id="if_state" transform="translate(111, 105.85879516601562)"><polygon points="0,14 14,0 0,-14 -14,0" class="state-start" r="7" width="28" height="28"></polygon></g><g class="node  statediagram-state undefined" id="state-True-53" data-node="true" data-id="True" transform="translate(277.4110221862793, 61.92939758300781)"><rect class="basic label-container" style="" x="-23.86284637451172" y="-18.929397583007812" width="47.72569274902344" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-16.36284637451172, -11.429397583007812)"><rect></rect><foreignObject width="32.72569274902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">True</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-False-54" data-node="true" data-id="False" transform="translate(277.4110221862793, 149.78819274902344)"><rect class="basic label-container" style="" x="-26.224681854248047" y="-18.929397583007812" width="52.449363708496094" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-18.724681854248047, -11.429397583007812)"><rect></rect><foreignObject width="37.449363708496094" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">False</span></div></foreignObject></g></g></g></g></g></g></g><text x="526.528564453125" y="-25" class="statediagramTitleText">玩家状态控制图</text></svg></div><h4 id='412-平台检测算法设计'><span>4.1.2 平台检测算法设计</span></h4><ul><li><p><strong><span>地板检测</span></strong></p></li></ul><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 31.9878px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27.9948px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">bool</span> <span class="cm-def">OnGround</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> (<span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>, <span class="cm-number">0.1f</span>, <span class="cm-variable">Ground</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&amp;&amp;</span> <span class="cm-operator">!</span><span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">up</span>, <span class="cm-number">0.1f</span>, <span class="cm-variable">Ground</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">||</span> (<span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>, <span class="cm-number">0.1f</span>, <span class="cm-variable">MoveBlock</span>));</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 187px;"></div><div class="CodeMirror-gutters" style="height: 187px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><code>!Physics2D.BoxCast(Collider.bounds.center, Collider.bounds.size, 0f, Vector2.up, 0.1f, Ground))</code><span>的要求是为了保证角色在地板上才可跳跃,避免了角色误嵌入图层后识别为可跳跃</span></p><ul><li><p><strong><span>悬浮平台检测</span></strong></p></li></ul><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 31.9878px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>6</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27.9948px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">bool</span> <span class="cm-def">OnPlatform</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>, <span class="cm-variable">CheckLength</span> <span class="cm-operator">+</span> <span class="cm-number">0.1f</span>, <span class="cm-variable">Platform</span>) &nbsp;<span class="cm-comment">// 脚下有平台</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&amp;&amp;</span> <span class="cm-operator">!</span><span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">up</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">Platform</span>) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// 脚上没平台</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">Rigidbody</span>.<span class="cm-variable">velocity</span>.<span class="cm-variable">y</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">0</span>; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">// 下落静止时才可判定为平台</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 187px;"></div><div class="CodeMirror-gutters" style="height: 187px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><span>悬浮平台要求当角色处于下落或有下落趋势时才可支持角色,否则不可判定为可支持平台</span></p><h4 id='413-冲刺结束判定算法设计'><span>4.1.3 冲刺结束判定算法设计</span></h4><ul><li><p><strong><span>识别是否碰撞到不可互动边界</span></strong></p></li></ul><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
      </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-variable-3">bool</span> <span class="cm-def">CrushBorder</span>() <span class="cm-comment">// 判断是否冲刺触碰*不可互动*边界</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">dashTargetPoint</span>.<span class="cm-variable">y</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">transform</span>.<span class="cm-variable">position</span>.<span class="cm-variable">y</span>) &nbsp; <span class="cm-comment">// 向上冲刺</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">Ground</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">||</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">up</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">Ground</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">dashTargetPoint</span>.<span class="cm-variable">y</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">transform</span>.<span class="cm-variable">position</span>.<span class="cm-variable">y</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">Ground</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">||</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">up</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">Ground</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">||</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">Platform</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">left</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">Ground</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">||</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">right</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">Ground</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 561px;"></div><div class="CodeMirror-gutters" style="height: 561px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><p><span>结合冲刺方向进行判断,冲刺方向通过冲刺目标点与角色位置的相对情况判断,当为左右向冲刺时,只需要识别左右方向是否有边界</span><code>Physics2D.BoxCast(Collider.bounds.center, Collider.bounds.size, 0f, Vector2.left, CheckLength, Ground)
              || Physics2D.BoxCast(Collider.bounds.center, Collider.bounds.size, 0f, Vector2.right, CheckLength, Ground)</code><span>即可</span></p><p><span>具体识别方式选择了</span><code>Unity</code><span>内置的2D物理引擎内</span><code>RaycastHit2D Physics2D.BoxCast(Vector2 origin, Vector2 size, float angle, Vector2 direction, float distance, int layerMask)</code><span>函数,返回在指定参数下的盒型头投掷体是否与指定图层有碰撞接触.</span></p><ul><li><p><strong><span>识别是否与移动方块碰撞</span></strong></p></li></ul><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>18</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-variable-3">bool</span> <span class="cm-def">CrushMoveBlock</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">dashTargetPoint</span>.<span class="cm-variable">y</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">transform</span>.<span class="cm-variable">position</span>.<span class="cm-variable">y</span>) &nbsp; <span class="cm-comment">// 向上冲刺</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">MoveBlock</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">||</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">up</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">MoveBlock</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">dashTargetPoint</span>.<span class="cm-variable">y</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">transform</span>.<span class="cm-variable">position</span>.<span class="cm-variable">y</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">MoveBlock</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">||</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">up</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">MoveBlock</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">left</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">MoveBlock</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">||</span> <span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">Vector2</span>.<span class="cm-variable">right</span>, <span class="cm-variable">CheckLength</span>, <span class="cm-variable">MoveBlock</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 498px;"></div><div class="CodeMirror-gutters" style="height: 498px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><p><span>这个函数为物理引擎和碰撞检测模块提供函数接口,用于对于移动方块的移动进行控制.</span></p><h3 id='42-场景管理模块'><span>4.2 </span><strong><span>场景管理模块</span></strong></h3><h4 id='421-场景切换设计'><span>4.2.1 场景切换设计</span></h4><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart3" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="statediagram" style="max-width: 437.74px; margin: auto;" viewBox="0 -51.98147964477539 437.7401123046875 455.27545166015625" role="graphics-document document" aria-roledescription="stateDiagram"><style>#mermaidChart3{font-family:sans-serif;font-size:16px;fill:var(--text-color);}#mermaidChart3 .error-icon{fill:#552222;}#mermaidChart3 .error-text{fill:#552222;stroke:#552222;}#mermaidChart3 .edge-thickness-normal{stroke-width:2px;}#mermaidChart3 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart3 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart3 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart3 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart3 .marker{fill:#666;stroke:#666;}#mermaidChart3 .marker.cross{stroke:#666;}#mermaidChart3 svg{font-family:sans-serif;font-size:16px;}#mermaidChart3 defs #statediagram-barbEnd{fill:#000;stroke:#000;}#mermaidChart3 g.stateGroup text{fill:#999;stroke:none;font-size:10px;}#mermaidChart3 g.stateGroup text{fill:#000000;stroke:none;font-size:10px;}#mermaidChart3 g.stateGroup .state-title{font-weight:bolder;fill:#111111;}#mermaidChart3 g.stateGroup rect{fill:#eee;stroke:#999;}#mermaidChart3 g.stateGroup line{stroke:#666;stroke-width:1;}#mermaidChart3 .transition{stroke:#000;stroke-width:1;fill:none;}#mermaidChart3 .stateGroup .composit{fill:#ffffff;border-bottom:1px;}#mermaidChart3 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mermaidChart3 .state-note{stroke:#999;fill:#666;}#mermaidChart3 .state-note text{fill:#fff;stroke:none;font-size:10px;}#mermaidChart3 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5;}#mermaidChart3 .edgeLabel .label rect{fill:#eee;opacity:0.5;}#mermaidChart3 .edgeLabel .label text{fill:#000000;}#mermaidChart3 .label div .edgeLabel{color:#000000;}#mermaidChart3 .stateLabel text{fill:#111111;font-size:10px;font-weight:bold;}#mermaidChart3 .node circle.state-start{fill:#222;stroke:#222;}#mermaidChart3 .node .fork-join{fill:#222;stroke:#222;}#mermaidChart3 .node circle.state-end{fill:hsl(0, 0%, 83.3333333333%);stroke:#ffffff;stroke-width:1.5;}#mermaidChart3 .end-state-inner{fill:#ffffff;stroke-width:1.5;}#mermaidChart3 .node rect{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart3 .node polygon{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart3 #statediagram-barbEnd{fill:#666;}#mermaidChart3 .statediagram-cluster rect{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart3 .cluster-label,#mermaidChart3 .nodeLabel{color:#111111;}#mermaidChart3 .statediagram-cluster rect.outer{rx:5px;ry:5px;}#mermaidChart3 .statediagram-state .divider{stroke:#000;}#mermaidChart3 .statediagram-state .title-state{rx:5px;ry:5px;}#mermaidChart3 .statediagram-cluster.statediagram-cluster .inner{fill:#ffffff;}#mermaidChart3 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f4f4f4;}#mermaidChart3 .statediagram-cluster .inner{rx:0;ry:0;}#mermaidChart3 .statediagram-state rect.basic{rx:5px;ry:5px;}#mermaidChart3 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#f4f4f4;}#mermaidChart3 .note-edge{stroke-dasharray:5;}#mermaidChart3 .statediagram-note rect{fill:#666;stroke:#999;stroke-width:1px;rx:0;ry:0;}#mermaidChart3 .statediagram-note rect{fill:#666;stroke:#999;stroke-width:1px;rx:0;ry:0;}#mermaidChart3 .statediagram-note text{fill:#fff;}#mermaidChart3 .statediagram-note .nodeLabel{color:#fff;}#mermaidChart3 .statediagram .edgeLabel{color:red;}#mermaidChart3 #dependencyStart,#mermaidChart3 #dependencyEnd{fill:#666;stroke:#666;stroke-width:1;}#mermaidChart3 .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart3 :root{--mermaid-alt-font-family:sans-serif;}</style><g><defs><marker id="mermaidChart3_statediagram-barbEnd" refX="19" refY="7" markerWidth="20" markerHeight="14" markerUnits="strokeWidth" orient="auto"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M222.009,22L222.009,26.167C222.009,30.333,222.009,38.667,222.009,47C222.009,55.333,222.009,63.667,222.009,67.833L222.009,72" id="edge55" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart3_statediagram-barbEnd)"></path><path d="M222.009,109.859L222.009,115.93C222.009,122.002,222.009,134.145,222.009,146.288C222.009,158.431,222.009,170.574,222.009,176.646L222.009,182.718" id="edge56" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart3_statediagram-barbEnd)"></path><path d="M191.61,211.037L166.809,218.699C142.008,226.36,92.405,241.683,72.517,255.416C52.629,269.149,62.457,281.292,67.37,287.364L72.284,293.435" id="edge57" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart3_statediagram-barbEnd)"></path><path d="M222.009,220.576L222.009,226.648C222.009,232.72,222.009,244.863,226.923,257.006C231.836,269.149,241.664,281.292,246.578,287.364L251.491,293.435" id="edge58" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart3_statediagram-barbEnd)"></path><path d="M102.923,293.435L107.837,287.364C112.751,281.292,122.578,269.149,137.359,256.981C152.14,244.813,171.875,232.62,181.743,226.524L191.61,220.428" id="edge59" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart3_statediagram-barbEnd)"></path><path d="M282.13,293.435L287.044,287.364C291.958,281.292,301.785,269.149,296.831,256.981C291.878,244.813,272.143,232.62,262.275,226.524L252.408,220.428" id="edge60" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart3_statediagram-barbEnd)"></path><path d="M252.408,211.069L277.109,218.725C301.811,226.381,351.214,241.693,375.915,255.421C400.617,269.149,400.617,281.292,400.617,287.364L400.617,293.435" id="edge61" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart3_statediagram-barbEnd)"></path><path d="M400.617,331.294L400.617,335.461C400.617,339.627,400.617,347.961,400.617,356.294C400.617,364.627,400.617,372.961,400.617,377.127L400.617,381.294" id="edge62" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart3_statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(222.00896072387695, 146.28819274902344)"><g class="label" transform="translate(-86.34620666503906, -11.429397583007812)"><rect rx="0" ry="0" width="172.69241333007812" height="22.858795166015625"></rect><foreignObject width="172.69241333007812" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Input.GetKetDown("s")</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(42.80179214477539, 257.0057830810547)"><g class="label" transform="translate(-34.80179214477539, -11.429397583007812)"><rect rx="0" ry="0" width="69.60358428955078" height="22.858795166015625"></rect><foreignObject width="69.60358428955078" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">transfer()</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(222.00896072387695, 257.0057830810547)"><g class="label" transform="translate(-34.80179214477539, -11.429397583007812)"><rect rx="0" ry="0" width="69.60358428955078" height="22.858795166015625"></rect><foreignObject width="69.60358428955078" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">transfer()</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(132.40537643432617, 257.0057830810547)"><g class="label" transform="translate(-34.80179214477539, -11.429397583007812)"><rect rx="0" ry="0" width="69.60358428955078" height="22.858795166015625"></rect><foreignObject width="69.60358428955078" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">transfer()</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(311.61254501342773, 257.0057830810547)"><g class="label" transform="translate(-34.80179214477539, -11.429397583007812)"><rect rx="0" ry="0" width="69.60358428955078" height="22.858795166015625"></rect><foreignObject width="69.60358428955078" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">transfer()</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(400.61681175231934, 257.0057830810547)"><g class="label" transform="translate(-29.12326431274414, -11.429397583007812)"><rect rx="0" ry="0" width="58.24652862548828" height="22.858795166015625"></rect><foreignObject width="58.24652862548828" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">EndBed</span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node  statediagram-state undefined" id="state-world1-61" data-node="true" data-id="world1" transform="translate(222.00896072387695, 201.64698791503906)"><rect class="basic label-container" style="" x="-30.398582458496094" y="-18.929397583007812" width="60.79716491699219" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-22.898582458496094, -11.429397583007812)"><rect></rect><foreignObject width="45.79716491699219" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Green</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-world2-59" data-node="true" data-id="world2" transform="translate(87.60358428955078, 312.3645782470703)"><rect class="basic label-container" style="" x="-30.149015426635742" y="-18.929397583007812" width="60.298030853271484" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-22.649015426635742, -11.429397583007812)"><rect></rect><foreignObject width="45.298030853271484" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">White</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-world3-60" data-node="true" data-id="world3" transform="translate(266.81075286865234, 312.3645782470703)"><rect class="basic label-container" style="" x="-22.13758659362793" y="-18.929397583007812" width="44.27517318725586" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-14.63758659362793, -11.429397583007812)"><rect></rect><foreignObject width="29.27517318725586" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Red</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-start-56" data-node="true" data-id="start" transform="translate(222.00896072387695, 90.92939758300781)"><rect class="basic label-container" style="" x="-29.714988708496094" y="-18.929397583007812" width="59.42997741699219" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-22.214988708496094, -11.429397583007812)"><rect></rect><foreignObject width="44.42997741699219" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Menu</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-end-62" data-node="true" data-id="end" transform="translate(400.61681175231934, 312.3645782470703)"><rect class="basic label-container" style="" x="-21.94589138031006" y="-18.929397583007812" width="43.89178276062012" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-14.445891380310059, -11.429397583007812)"><rect></rect><foreignObject width="28.891782760620117" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">End</span></div></foreignObject></g></g><g class="node default" id="state-root_start-55" data-node="true" data-id="root_start" transform="translate(222.00896072387695, 15)"><circle class="state-start" r="7" width="14" height="14"></circle></g><g class="node default" id="state-root_end-62" data-node="true" data-id="root_end" transform="translate(400.61681175231934, 388.2939758300781)"><circle class="state-start" r="7" width="14" height="14"></circle><circle class="state-end" r="5" width="10" height="10"></circle></g></g></g></g><text x="218.87005615234375" y="-25" class="statediagramTitleText">场景切换控制图</text></svg></div><h4 id='422-场景切换算法'><span>4.2.2 场景切换算法</span></h4><ul><li><p><strong><span>场景转换</span></strong></p></li></ul><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>16</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-keyword">void</span> <span class="cm-variable">transfer</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Scene</span> <span class="cm-variable">scene</span> <span class="cm-operator">=</span> <span class="cm-variable">SceneManager</span>.<span class="cm-variable">GetSceneByName</span>(<span class="cm-variable">worldName</span>[<span class="cm-variable">world</span>]);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
      </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">scene</span>.<span class="cm-variable">IsValid</span>() <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">scene</span>.<span class="cm-variable">isLoaded</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Hide</span>(<span class="cm-variable">SceneManager</span>.<span class="cm-variable">GetSceneByBuildIndex</span>(<span class="cm-variable">NowWorld</span>));</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">SceneManager</span>.<span class="cm-variable">SetActiveScene</span>(<span class="cm-variable">scene</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Display</span>(<span class="cm-variable">scene</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Hide</span>(<span class="cm-variable">SceneManager</span>.<span class="cm-variable">GetSceneByBuildIndex</span>(<span class="cm-variable">NowWorld</span>));</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">SceneManager</span>.<span class="cm-variable">LoadScene</span>(<span class="cm-variable">world</span>, <span class="cm-variable">LoadSceneMode</span>.<span class="cm-variable">Additive</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 332px;"></div><div class="CodeMirror-gutters" style="height: 332px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><p><span>预先在</span><code>SceneManager.sceneLoaded</code><span>事件中添加了</span><code>Act()</code><span>函数,实现对于新加载的场景在场景加载完成后设置为</span><code>Active</code><span>,旧场景通过</span><code>Hide(Scene scene)</code><span>隐藏,新场景通过</span><code>Display(Scene scene)</code><span>显示,加载方式使用</span><code>Addictive</code><span>的加载模式,保留原始数据</span></p><ul><li><p><strong><span>补充函数声明</span></strong></p></li></ul><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>19</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-keyword">void</span> <span class="cm-variable">Hide</span>(<span class="cm-variable">Scene</span> <span class="cm-variable">scene</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GameObject</span><span class="cm-operator">&gt;</span> <span class="cm-variable">objects</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GameObject</span><span class="cm-operator">&gt;</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">scene</span>.<span class="cm-variable">GetRootGameObjects</span>(<span class="cm-variable">objects</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">foreach</span> (<span class="cm-variable">GameObject</span> <span class="cm-variable">obj</span> <span class="cm-keyword">in</span> <span class="cm-variable">objects</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">obj</span>.<span class="cm-variable">SetActive</span>(<span class="cm-atom">false</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
      </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-keyword">void</span> <span class="cm-variable">Display</span>(<span class="cm-variable">Scene</span> <span class="cm-variable">scene</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GameObject</span><span class="cm-operator">&gt;</span> <span class="cm-variable">objects</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GameObject</span><span class="cm-operator">&gt;</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">scene</span>.<span class="cm-variable">GetRootGameObjects</span>(<span class="cm-variable">objects</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">foreach</span> (<span class="cm-variable">GameObject</span> <span class="cm-variable">obj</span> <span class="cm-keyword">in</span> <span class="cm-variable">objects</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">obj</span>.<span class="cm-variable">SetActive</span>(<span class="cm-atom">true</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 394px;"></div><div class="CodeMirror-gutters" style="height: 394px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><h3 id='43-存档系统'><span>4.3 </span><strong><span>存档系统</span></strong></h3><h4 id='431-存档系统设计图'><span>4.3.1 存档系统设计图</span></h4><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart4" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 1281.43px; margin: auto;" viewBox="-8 -51.98147964477539 1281.4300537109375 489.7130126953125" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart4{font-family:sans-serif;font-size:16px;fill:var(--text-color);}#mermaidChart4 .error-icon{fill:#552222;}#mermaidChart4 .error-text{fill:#552222;stroke:#552222;}#mermaidChart4 .edge-thickness-normal{stroke-width:2px;}#mermaidChart4 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart4 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart4 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart4 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart4 .marker{fill:#666;stroke:#666;}#mermaidChart4 .marker.cross{stroke:#666;}#mermaidChart4 svg{font-family:sans-serif;font-size:16px;}#mermaidChart4 .label{font-family:sans-serif;color:#000000;}#mermaidChart4 .cluster-label text{fill:#333;}#mermaidChart4 .cluster-label span,#mermaidChart4 p{color:#333;}#mermaidChart4 .label text,#mermaidChart4 span,#mermaidChart4 p{fill:#000000;color:#000000;}#mermaidChart4 .node rect,#mermaidChart4 .node circle,#mermaidChart4 .node ellipse,#mermaidChart4 .node polygon,#mermaidChart4 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaidChart4 .flowchart-label text{text-anchor:middle;}#mermaidChart4 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart4 .node .label{text-align:center;}#mermaidChart4 .node.clickable{cursor:pointer;}#mermaidChart4 .arrowheadPath{fill:#333333;}#mermaidChart4 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaidChart4 .flowchart-link{stroke:#666;fill:none;}#mermaidChart4 .edgeLabel{background-color:white;text-align:center;}#mermaidChart4 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaidChart4 .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaidChart4 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaidChart4 .cluster text{fill:#333;}#mermaidChart4 .cluster span,#mermaidChart4 p{color:#333;}#mermaidChart4 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart4 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart4 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart4_flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="6" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart4_flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart4_flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart4_flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart4_flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart4_flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster default flowchart-label" id="GameData"><rect style="" rx="0" ry="0" x="45.49153518676758" y="0" width="1219.9384841918945" height="87.85879516601562"></rect><g class="cluster-label" transform="translate(615.1359786987305, 0)"><foreignObject width="80.64959716796875" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">GameData</span></div></foreignObject></g></g><g class="cluster default flowchart-label" id="DataBase"><rect style="" rx="0" ry="0" x="0" y="160.71759033203125" width="352.6229724884033" height="269.0139389038086"></rect><g class="cluster-label" transform="translate(140.70674228668213, 160.71759033203125)"><foreignObject width="71.20948791503906" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">DataBase</span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M186.295,329.656L180.894,293.176L178.265,262.008" id="L-InterData-OuterData-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-InterData LE-OuterData" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path><path d="M127.459,248.96L78.877,293.176L130.358,334.138" id="L-OuterData-InterData-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-OuterData LE-InterData" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path><path d="M237.038,333.562L280.849,293.176L228.394,247.305" id="L-InterData-OuterData-1" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-InterData LE-OuterData" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path><path d="M504.581,62.859L504.581,87.859L504.581,124.288L504.581,160.718L504.581,197.003" id="L-PlayerData-PlayerController玩家控制模块-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-PlayerData LE-PlayerController玩家控制模块" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path><path d="M788.588,62.859L788.588,87.859L788.588,124.288L788.588,160.718L788.588,197.003" id="L-WorldData-WorldController场景管理模块-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-WorldData LE-WorldController场景管理模块" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path><path d="M1006.14,62.859L1006.14,87.859L1006.14,124.288L1006.14,160.718L1068.162,199.493" id="L-ButtonData-DoorOpen机关门无声打开-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-ButtonData LE-DoorOpen机关门无声打开" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path><path d="M1177.788,62.859L1177.788,87.859L1177.788,124.288L1177.788,160.718L1130.47,198.971" id="L-LevelData-DoorOpen机关门无声打开-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-LevelData LE-DoorOpen机关门无声打开" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path><path d="M224.404,197.326L300.332,160.718L300.332,124.288L300.332,93.159" id="L-OuterData-GameData-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-OuterData LE-GameData" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path><path d="M140.838,87.859L140.838,124.288L140.838,160.718L152.354,181.991" id="L-GameData-OuterData-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-GameData LE-OuterData" style="fill:none;" marker-end="url(#mermaidChart4_flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(180.8940944671631, 293.1763229370117)"><g class="label" transform="translate(-40.99030685424805, -11.429397583007812)"><foreignObject width="81.9806137084961" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">SaveData()</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(78.8773136138916, 293.1763229370117)"><g class="label" transform="translate(-41.02647399902344, -11.429397583007812)"><foreignObject width="82.05294799804688" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">GameLoad</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(280.84924507141113, 293.1763229370117)"><g class="label" transform="translate(-38.96484375, -11.429397583007812)"><foreignObject width="77.9296875" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">GameQuit</span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(295.18218, 163.20041)"><g class="label" transform="translate(-41.02647399902344, -11.429397583007812)"><foreignObject width="82.05294799804688" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">GameLoad</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(140.83767, 139.03341)"><g class="label" transform="translate(-38.96484375, -11.429397583007812)"><foreignObject width="77.9296875" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">GameQuit</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default default flowchart-label" id="flowchart-BollData-35" data-node="true" data-id="BollData" transform="translate(174.8213233947754, 43.92939758300781)"><rect class="basic label-container" style="" rx="5" ry="5" x="-83.66825866699219" y="-18.929397583007812" width="167.33651733398438" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-76.16825866699219, -11.429397583007812)"><rect></rect><foreignObject width="152.33651733398438" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">EnergyBollDataSave</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-PlayerData-36" data-node="true" data-id="PlayerData" transform="translate(504.58115577697754, 43.92939758300781)"><rect class="basic label-container" style="" rx="5" ry="5" x="-72.26779174804688" y="-18.929397583007812" width="144.53558349609375" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-64.76779174804688, -11.429397583007812)"><rect></rect><foreignObject width="129.53558349609375" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">PlayerMovement</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-ButtonData-37" data-node="true" data-id="ButtonData" transform="translate(1006.1396598815918, 43.92939758300781)"><rect class="basic label-container" style="" rx="5" ry="5" x="-69.00535202026367" y="-18.929397583007812" width="138.01070404052734" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-61.50535202026367, -11.429397583007812)"><rect></rect><foreignObject width="123.01070404052734" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">ButtonDataSave</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-WorldData-38" data-node="true" data-id="WorldData" transform="translate(788.5879459381104, 43.92939758300781)"><rect class="basic label-container" style="" rx="5" ry="5" x="-45.13020706176758" y="-18.929397583007812" width="90.26041412353516" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-37.63020706176758, -11.429397583007812)"><rect></rect><foreignObject width="75.26041412353516" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">CheckEnd</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-LevelData-39" data-node="true" data-id="LevelData" transform="translate(1177.7875137329102, 43.92939758300781)"><rect class="basic label-container" style="" rx="5" ry="5" x="-52.64250564575195" y="-18.929397583007812" width="105.2850112915039" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-45.14250564575195, -11.429397583007812)"><rect></rect><foreignObject width="90.2850112915039" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MatchOpen</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-OuterData-31" label-offset-y="11.059389722557352" data-node="true" data-id="OuterData" transform="translate(174.8213233947754, 221.23225784301758)"><path style="" d="M 0,11.059389722557352 a 49.582611083984375,11.059389722557352 0,0,0 99.16522216796875 0 a 49.582611083984375,11.059389722557352 0,0,0 -99.16522216796875 0 l 0,48.91818488857298 a 49.582611083984375,11.059389722557352 0,0,0 99.16522216796875 0 l 0,-48.91818488857298" transform="translate(-49.582611083984375,-35.51848216684384)"></path><g class="label" style="" transform="translate(-42.082611083984375, -11.429397583007812)"><rect></rect><foreignObject width="84.16522216796875" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">PlayerPrefs</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-InterData-32" label-offset-y="12.42233576375609" data-node="true" data-id="InterData" transform="translate(191.8641471862793, 367.1686248779297)"><path style="" d="M 0,12.42233576375609 a 61.728153228759766,12.42233576375609 0,0,0 123.45630645751953 0 a 61.728153228759766,12.42233576375609 0,0,0 -123.45630645751953 0 l 0,50.28113092977171 a 61.728153228759766,12.42233576375609 0,0,0 123.45630645751953 0 l 0,-50.28113092977171" transform="translate(-61.728153228759766,-37.56290122864195)"></path><g class="label" style="" transform="translate(-54.228153228759766, -11.429397583007812)"><rect></rect><foreignObject width="108.45630645751953" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">PlayerSettings</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-PlayerController玩家控制模块-49" data-node="true" data-id="PlayerController玩家控制模块" transform="translate(504.58115577697754, 221.23225784301758)"><rect class="basic label-container" style="" rx="0" ry="0" x="-116.95818328857422" y="-18.929397583007812" width="233.91636657714844" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-109.45818328857422, -11.429397583007812)"><rect></rect><foreignObject width="218.91636657714844" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">PlayerController玩家控制模块</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-WorldController场景管理模块-51" data-node="true" data-id="WorldController场景管理模块" transform="translate(788.5879459381104, 221.23225784301758)"><rect class="basic label-container" style="" rx="0" ry="0" x="-117.0486068725586" y="-18.929397583007812" width="234.0972137451172" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-109.5486068725586, -11.429397583007812)"><rect></rect><foreignObject width="219.0972137451172" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">WorldController场景管理模块</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-DoorOpen机关门无声打开-54" data-node="true" data-id="DoorOpen机关门无声打开" transform="translate(1102.9336395263672, 221.23225784301758)"><rect class="basic label-container" style="" rx="0" ry="0" x="-103.91926574707031" y="-18.929397583007812" width="207.83853149414062" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-96.41926574707031, -11.429397583007812)"><rect></rect><foreignObject width="192.83853149414062" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">DoorOpen机关门无声打开</span></div></foreignObject></g></g></g></g></g><text x="632.7150268554688" y="-25" class="flowchartTitleText">存档系统设计图</text></svg></div><h4 id='432-存档设计算法'><span>4.3.2 存档设计算法</span></h4><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 31.9878px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>5</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27.9948px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">void</span> <span class="cm-variable">Save</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Home</span> <span class="cm-operator">=</span> <span class="cm-variable">Player</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">position</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">HomeCamera</span> <span class="cm-operator">=</span> <span class="cm-variable">Camera</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">position</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="height: 104px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><span>调用此函数可以完成游戏内部的数据储存,在角色复活时</span></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 31.9878px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>8</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27.9948px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-keyword">void</span> <span class="cm-variable">Restart</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">GetComponent</span><span class="cm-operator">&lt;</span><span class="cm-variable">PlayerMovement</span><span class="cm-operator">&gt;</span>().<span class="cm-variable">FromDashToNormal</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Player</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">position</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Vector3</span>(<span class="cm-variable">Home</span>.<span class="cm-variable">x</span>, <span class="cm-variable">Home</span>.<span class="cm-variable">y</span>, <span class="cm-variable">Home</span>.<span class="cm-variable">z</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Camera</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">position</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Vector3</span>(<span class="cm-variable">HomeCamera</span>.<span class="cm-variable">x</span>, <span class="cm-variable">HomeCamera</span>.<span class="cm-variable">y</span>, <span class="cm-variable">HomeCamera</span>.<span class="cm-variable">z</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Rigidbody</span>.<span class="cm-variable">bodyType</span> <span class="cm-operator">=</span> <span class="cm-variable">RigidbodyType2D</span>.<span class="cm-variable">Dynamic</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Animator</span>.<span class="cm-variable">SetInteger</span>(<span class="cm-string">"state"</span>, <span class="cm-number">0</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 166px;"></div><div class="CodeMirror-gutters" style="height: 166px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><span>恢复位置数据</span></p><p><span>同时为了将数据保存至本地,需要将数据储存在</span><code>PlayerPrefs</code><span>中,实现在游戏退出重进后数据的保存恢复</span></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>10</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">void</span> <span class="cm-variable">SaveData</span>() {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span>(<span class="cm-string">"HomePosX"</span>, <span class="cm-variable">Home</span>.<span class="cm-variable">x</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span>(<span class="cm-string">"HomePosY"</span>, <span class="cm-variable">Home</span>.<span class="cm-variable">y</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span>(<span class="cm-string">"HomePosZ"</span>, <span class="cm-variable">Home</span>.<span class="cm-variable">z</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
      </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-string">"HomeCameraPosX"</span>, <span class="cm-variable">HomeCamera</span>.<span class="cm-variable">x</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span>(<span class="cm-string">"HomeCameraPosY"</span>, <span class="cm-variable">HomeCamera</span>.<span class="cm-variable">y</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span>(<span class="cm-string">"HomeCameraPosZ"</span>, <span class="cm-variable">HomeCamera</span>.<span class="cm-variable">z</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="height: 208px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><p><span>储存角色和相机的位置数据</span></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>11</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">void</span> <span class="cm-variable">SaveButtonData</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"ButtonNum"</span>, <span class="cm-variable">ButtonNum</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">ButtonNum</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span>(<span class="cm-string">"Button"</span> <span class="cm-operator">+</span> <span class="cm-variable">i</span> <span class="cm-operator">+</span> <span class="cm-string">"PosX"</span>, <span class="cm-variable">transform</span>.<span class="cm-variable">GetChild</span>(<span class="cm-variable">i</span>).<span class="cm-variable">position</span>.<span class="cm-variable">x</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span>(<span class="cm-string">"Button"</span> <span class="cm-operator">+</span> <span class="cm-variable">i</span> <span class="cm-operator">+</span> <span class="cm-string">"PosY"</span>, <span class="cm-variable">transform</span>.<span class="cm-variable">GetChild</span>(<span class="cm-variable">i</span>).<span class="cm-variable">position</span>.<span class="cm-variable">y</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetFloat</span>(<span class="cm-string">"Button"</span> <span class="cm-operator">+</span> <span class="cm-variable">i</span> <span class="cm-operator">+</span> <span class="cm-string">"PosZ"</span>, <span class="cm-variable">transform</span>.<span class="cm-variable">GetChild</span>(<span class="cm-variable">i</span>).<span class="cm-variable">position</span>.<span class="cm-variable">z</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"Button"</span> <span class="cm-operator">+</span> <span class="cm-variable">i</span> <span class="cm-operator">+</span> <span class="cm-string">"Active"</span>, <span class="cm-variable">transform</span>.<span class="cm-variable">GetChild</span>(<span class="cm-variable">i</span>).<span class="cm-variable">gameObject</span>.<span class="cm-variable">activeSelf</span> <span class="cm-operator">?</span> <span class="cm-number">1</span> : <span class="cm-number">0</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 249px;"></div><div class="CodeMirror-gutters" style="height: 249px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><p><span>储存主世界按钮的数据</span></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 31.9878px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>8</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27.9948px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">void</span> <span class="cm-variable">SavePassData</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"GreenPass"</span>, <span class="cm-variable">GreenPass</span> <span class="cm-operator">?</span> <span class="cm-number">1</span> : <span class="cm-number">0</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"WhitePass"</span>, <span class="cm-variable">WhitePass</span> <span class="cm-operator">?</span> <span class="cm-number">1</span> : <span class="cm-number">0</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"RedPass"</span>, <span class="cm-variable">RedPass</span> <span class="cm-operator">?</span> <span class="cm-number">1</span> : <span class="cm-number">0</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"SecretItem"</span>, <span class="cm-variable">SecretItem</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"CanEnd"</span>, <span class="cm-variable">CanEnd</span> <span class="cm-operator">?</span> <span class="cm-number">1</span> : <span class="cm-number">0</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 166px;"></div><div class="CodeMirror-gutters" style="height: 166px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><span>储存游戏通关情况的数据</span></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 31.9878px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27.9948px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">void</span> <span class="cm-variable">SaveWorldData</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"ActiveWorld"</span>, <span class="cm-variable">SceneManager</span>.<span class="cm-variable">GetActiveScene</span>().<span class="cm-variable">buildIndex</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 83px;"></div><div class="CodeMirror-gutters" style="height: 83px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><span>储存上一次打开的世界的数据</span></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 31.9878px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27.9948px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">void</span> <span class="cm-variable">SavePlayerData</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 19px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">PlayerPrefs</span>.<span class="cm-variable">SetInt</span>(<span class="cm-string">"energy"</span>, <span class="cm-variable">energy</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 83px;"></div><div class="CodeMirror-gutters" style="height: 83px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><span>储存角色属性的数据</span></p><p><span>在重新加载游戏后,主界面不改变,场景管理模块接受世界数据加载好世界,角色相应数据恢复,角色位置恢复,按钮状态与机关门状态恢复</span></p><h4 id='433-数据恢复设计'><span>4.3.3 数据恢复设计</span></h4><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart5" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="statediagram" style="max-width: 1160.58px; margin: auto;" viewBox="0 -51.98147964477539 1160.5836181640625 626.7106323242188" role="graphics-document document" aria-roledescription="stateDiagram"><style>#mermaidChart5{font-family:sans-serif;font-size:16px;fill:var(--text-color);}#mermaidChart5 .error-icon{fill:#552222;}#mermaidChart5 .error-text{fill:#552222;stroke:#552222;}#mermaidChart5 .edge-thickness-normal{stroke-width:2px;}#mermaidChart5 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart5 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart5 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart5 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart5 .marker{fill:#666;stroke:#666;}#mermaidChart5 .marker.cross{stroke:#666;}#mermaidChart5 svg{font-family:sans-serif;font-size:16px;}#mermaidChart5 defs #statediagram-barbEnd{fill:#000;stroke:#000;}#mermaidChart5 g.stateGroup text{fill:#999;stroke:none;font-size:10px;}#mermaidChart5 g.stateGroup text{fill:#000000;stroke:none;font-size:10px;}#mermaidChart5 g.stateGroup .state-title{font-weight:bolder;fill:#111111;}#mermaidChart5 g.stateGroup rect{fill:#eee;stroke:#999;}#mermaidChart5 g.stateGroup line{stroke:#666;stroke-width:1;}#mermaidChart5 .transition{stroke:#000;stroke-width:1;fill:none;}#mermaidChart5 .stateGroup .composit{fill:#ffffff;border-bottom:1px;}#mermaidChart5 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mermaidChart5 .state-note{stroke:#999;fill:#666;}#mermaidChart5 .state-note text{fill:#fff;stroke:none;font-size:10px;}#mermaidChart5 .stateLabel .box{stroke:none;stroke-width:0;fill:#eee;opacity:0.5;}#mermaidChart5 .edgeLabel .label rect{fill:#eee;opacity:0.5;}#mermaidChart5 .edgeLabel .label text{fill:#000000;}#mermaidChart5 .label div .edgeLabel{color:#000000;}#mermaidChart5 .stateLabel text{fill:#111111;font-size:10px;font-weight:bold;}#mermaidChart5 .node circle.state-start{fill:#222;stroke:#222;}#mermaidChart5 .node .fork-join{fill:#222;stroke:#222;}#mermaidChart5 .node circle.state-end{fill:hsl(0, 0%, 83.3333333333%);stroke:#ffffff;stroke-width:1.5;}#mermaidChart5 .end-state-inner{fill:#ffffff;stroke-width:1.5;}#mermaidChart5 .node rect{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart5 .node polygon{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart5 #statediagram-barbEnd{fill:#666;}#mermaidChart5 .statediagram-cluster rect{fill:#eee;stroke:#000;stroke-width:1px;}#mermaidChart5 .cluster-label,#mermaidChart5 .nodeLabel{color:#111111;}#mermaidChart5 .statediagram-cluster rect.outer{rx:5px;ry:5px;}#mermaidChart5 .statediagram-state .divider{stroke:#000;}#mermaidChart5 .statediagram-state .title-state{rx:5px;ry:5px;}#mermaidChart5 .statediagram-cluster.statediagram-cluster .inner{fill:#ffffff;}#mermaidChart5 .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f4f4f4;}#mermaidChart5 .statediagram-cluster .inner{rx:0;ry:0;}#mermaidChart5 .statediagram-state rect.basic{rx:5px;ry:5px;}#mermaidChart5 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#f4f4f4;}#mermaidChart5 .note-edge{stroke-dasharray:5;}#mermaidChart5 .statediagram-note rect{fill:#666;stroke:#999;stroke-width:1px;rx:0;ry:0;}#mermaidChart5 .statediagram-note rect{fill:#666;stroke:#999;stroke-width:1px;rx:0;ry:0;}#mermaidChart5 .statediagram-note text{fill:#fff;}#mermaidChart5 .statediagram-note .nodeLabel{color:#fff;}#mermaidChart5 .statediagram .edgeLabel{color:red;}#mermaidChart5 #dependencyStart,#mermaidChart5 #dependencyEnd{fill:#666;stroke:#666;stroke-width:1;}#mermaidChart5 .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart5 :root{--mermaid-alt-font-family:sans-serif;}</style><g><defs><marker id="mermaidChart5_statediagram-barbEnd" refX="19" refY="7" markerWidth="20" markerHeight="14" markerUnits="strokeWidth" orient="auto"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M98.624,45.859L98.624,50.025C98.624,54.192,98.624,62.525,98.624,70.859C98.624,79.192,98.624,87.525,98.624,91.692L98.624,95.859" id="edge63" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M96.878,133.718L96.318,139.789C95.758,145.861,94.638,158.004,94.078,172.135C93.518,186.267,93.518,202.386,93.518,210.446L93.518,218.506" id="edge64" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M115.123,133.718L120.415,139.789C125.707,145.861,136.291,158.004,146.875,170.147C157.459,182.29,168.043,194.433,173.335,200.505L178.627,206.576" id="edge65" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M196.446,121.663L197.997,129.743C199.548,137.824,202.65,153.986,203.036,168.138C203.421,182.29,201.09,194.433,199.925,200.505L198.76,206.576" id="edge66" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M195.126,244.435L195.126,250.507C195.126,256.578,195.126,268.721,239.564,283.075C284.002,297.429,372.878,313.993,417.316,322.276L461.754,330.558" id="edge67" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M492.153,355.153L492.153,361.224C492.153,367.296,492.153,379.439,492.153,391.582C492.153,403.725,492.153,415.868,492.153,421.94L492.153,428.012" id="edge68" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M505.95,444.382L552.568,452.392C599.186,460.402,692.422,476.421,772.169,492.443C851.916,508.464,918.174,524.486,951.303,532.498L984.432,540.509" id="edge69" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M463.382,132.662L441.939,138.91C420.497,145.157,377.612,157.652,356.169,173.126C334.726,188.6,334.726,207.053,334.726,225.506C334.726,243.959,334.726,262.412,355.898,279.083C377.069,295.754,419.411,310.644,440.583,318.089L461.754,325.534" id="edge70" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M586.079,125.022L631.162,132.543C676.246,140.064,766.413,155.105,811.496,171.853C856.579,188.6,856.579,207.053,856.579,225.506C856.579,243.959,856.579,262.412,856.579,280.865C856.579,299.318,856.579,317.77,856.579,336.223C856.579,354.676,856.579,373.129,856.579,390.761C856.579,408.392,856.579,425.202,856.579,442.012C856.579,458.821,856.579,475.631,877.888,491.502C899.197,507.373,941.815,522.305,963.124,529.771L984.432,537.237" id="edge71" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M463.382,121.883L393.831,129.927C324.28,137.971,185.177,154.059,115.626,171.33C46.075,188.6,46.075,207.053,46.075,225.506C46.075,243.959,46.075,262.412,46.075,280.865C46.075,299.318,46.075,317.77,46.075,336.223C46.075,354.676,46.075,373.129,46.075,390.761C46.075,408.392,46.075,425.202,46.075,442.012C46.075,458.821,46.075,475.631,116.732,492.805C187.388,509.978,328.702,527.515,399.358,536.284L470.015,545.052" id="edge72" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M492.153,456.012L492.153,462.083C492.153,468.155,492.153,480.298,492.153,492.441C492.153,504.584,492.153,516.727,492.153,522.799L492.153,528.87" id="edge73" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M586.079,132.662L607.522,138.91C628.964,145.157,671.85,157.652,693.292,169.971C714.735,182.29,714.735,194.433,714.735,200.505L714.735,206.576" id="edge74" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M657.843,236.754L620.657,244.106C583.471,251.457,509.1,266.161,478.212,279.584C447.325,293.008,459.921,305.151,466.219,311.222L472.517,317.294" id="edge75" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M680.54,244.435L669.572,250.507C658.604,256.578,636.668,268.721,610.337,281.731C584.006,294.741,553.278,308.618,537.915,315.557L522.551,322.495" id="edge76" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M771.627,239.451L799.786,246.353C827.945,253.256,884.263,267.06,912.422,283.189C940.58,299.318,940.58,317.77,940.58,336.223C940.58,354.676,940.58,373.129,940.58,390.761C940.58,408.392,940.58,425.202,940.58,442.012C940.58,458.821,940.58,475.631,948.697,490.108C956.813,504.584,973.045,516.727,981.161,522.799L989.278,528.87" id="edge77" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M771.627,233.93L824.453,241.753C877.279,249.575,982.931,265.22,1035.757,282.269C1088.583,299.318,1088.583,317.77,1088.583,336.223C1088.583,354.676,1088.583,373.129,1088.583,390.761C1088.583,408.392,1088.583,425.202,1088.583,442.012C1088.583,458.821,1088.583,475.631,1080.466,490.108C1072.35,504.584,1056.118,516.727,1048.002,522.799L1039.885,528.87" id="edge78" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path><path d="M714.735,244.435L714.735,250.507C714.735,256.578,714.735,268.721,714.735,284.019C714.735,299.318,714.735,317.77,714.735,336.223C714.735,354.676,714.735,373.129,714.735,390.761C714.735,408.392,714.735,425.202,714.735,442.012C714.735,458.821,714.735,475.631,681.327,492.345C647.92,509.059,581.105,525.676,547.698,533.985L514.29,542.294" id="edge79" class=" edge-thickness-normal transition" style="fill:none" marker-end="url(#mermaidChart5_statediagram-barbEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(195.1262264251709, 280.8645782470703)"><g class="label" transform="translate(-119.59996795654297, -11.429397583007812)"><rect rx="0" ry="0" width="239.19993591308594" height="22.858795166015625"></rect><foreignObject width="239.19993591308594" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Input.GetKeyDown("s")后台加载</span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(785.6571712493896, 492.4409637451172)"><g class="label" transform="translate(-50.92230987548828, -11.429397583007812)"><rect rx="0" ry="0" width="101.84461975097656" height="22.858795166015625"></rect><foreignObject width="101.84461975097656" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">WhiteLoaded</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(334.72619438171387, 225.5057830810547)"><g class="label" transform="translate(-46.336082458496094, -11.429397583007812)"><rect rx="0" ry="0" width="92.67217254638672" height="22.858795166015625"></rect><foreignObject width="92.67216491699219" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">GreenActive</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(856.5794811248779, 336.22337341308594)"><g class="label" transform="translate(-46.086517333984375, -11.429397583007812)"><rect rx="0" ry="0" width="92.17303466796875" height="22.858795166015625"></rect><foreignObject width="92.17303466796875" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">WhiteActive</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(46.0750846862793, 336.22337341308594)"><g class="label" transform="translate(-38.0750846862793, -11.429397583007812)"><rect rx="0" ry="0" width="76.1501693725586" height="22.858795166015625"></rect><foreignObject width="76.1501693725586" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">RedActive</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(492.152624130249, 492.4409637451172)"><g class="label" transform="translate(-42.9108772277832, -11.429397583007812)"><rect rx="0" ry="0" width="85.8217544555664" height="22.858795166015625"></rect><foreignObject width="85.8217544555664" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">RedLoaded</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(714.7348613739014, 170.14698791503906)"><g class="label" transform="translate(-112.00086975097656, -11.429397583007812)"><rect rx="0" ry="0" width="224.00173950195312" height="22.858795166015625"></rect><foreignObject width="224.00173950195312" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">位置加载完毕后加载角色能量值</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(434.72836112976074, 280.8645782470703)"><g class="label" transform="translate(-80.00216674804688, -11.429397583007812)"><rect rx="0" ry="0" width="160.00433349609375" height="22.858795166015625"></rect><foreignObject width="160.00433349609375" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">加载按钮状态和机关门</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(614.7326946258545, 280.8645782470703)"><g class="label" transform="translate(-80.00216674804688, -11.429397583007812)"><rect rx="0" ry="0" width="160.00433349609375" height="22.858795166015625"></rect><foreignObject width="160.00433349609375" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">加载可拾取物品的状态</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(940.5804958343506, 391.58216857910156)"><g class="label" transform="translate(-64.00101470947266, -11.429397583007812)"><rect rx="0" ry="0" width="128.00204467773438" height="22.858795166015625"></rect><foreignObject width="128.0020294189453" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">加载关卡通关状态</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1088.582525253296, 391.58216857910156)"><g class="label" transform="translate(-64.00101470947266, -11.429397583007812)"><rect rx="0" ry="0" width="128.00204467773438" height="22.858795166015625"></rect><foreignObject width="128.0020294189453" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">加载通关物品状态</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(714.7348613739014, 391.58216857910156)"><g class="label" transform="translate(-64.00101470947266, -11.429397583007812)"><rect rx="0" ry="0" width="128.00204467773438" height="22.858795166015625"></rect><foreignObject width="128.0020294189453" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">加载通关物品状态</span></div></foreignObject></g></g></g><g class="nodes"><g class="node  statediagram-state undefined" id="state-start-67" data-node="true" data-id="start" transform="translate(195.1262264251709, 225.5057830810547)"><rect class="basic label-container" style="" x="-29.714988708496094" y="-18.929397583007812" width="59.42997741699219" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-22.214988708496094, -11.429397583007812)"><rect></rect><foreignObject width="44.42997741699219" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Menu</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-over-63" data-node="true" data-id="over" transform="translate(98.62391090393066, 26.929397583007812)"><rect class="basic label-container" style="" x="-21.94589138031006" y="-18.929397583007812" width="43.89178276062012" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-14.445891380310059, -11.429397583007812)"><rect></rect><foreignObject width="28.891782760620117" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">End</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-world1-76" data-node="true" data-id="world1" transform="translate(492.152624130249, 336.22337341308594)"><rect class="basic label-container" style="" x="-30.398582458496094" y="-18.929397583007812" width="60.79716491699219" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-22.898582458496094, -11.429397583007812)"><rect></rect><foreignObject width="45.79716491699219" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Green</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-world2-78" data-node="true" data-id="world2" transform="translate(1014.5815105438232, 547.7997589111328)"><rect class="basic label-container" style="" x="-30.149015426635742" y="-18.929397583007812" width="60.298030853271484" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-22.649015426635742, -11.429397583007812)"><rect></rect><foreignObject width="45.298030853271484" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">White</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-world3-79" data-node="true" data-id="world3" transform="translate(492.152624130249, 547.7997589111328)"><rect class="basic label-container" style="" x="-22.13758659362793" y="-18.929397583007812" width="44.27517318725586" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-14.63758659362793, -11.429397583007812)"><rect></rect><foreignObject width="29.27517318725586" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Red</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-数据清除-65" data-node="true" data-id="数据清除" transform="translate(98.62391090393066, 114.78819274902344)"><rect class="basic label-container" style="" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">数据清除</span></div></foreignObject></g></g><g class="node default" id="state-root_end-64" data-node="true" data-id="root_end" transform="translate(93.51757431030273, 225.5057830810547)"><circle class="state-start" r="7" width="14" height="14"></circle><circle class="state-end" r="5" width="10" height="10"></circle></g><g class="node default" id="state-root_start-66" data-node="true" data-id="root_start" transform="translate(195.1262264251709, 114.78819274902344)"><circle class="state-start" r="7" width="14" height="14"></circle></g><g class="node default" id="state-if_state1-73" data-node="true" data-id="if_state1" transform="translate(492.152624130249, 442.0115661621094)"><polygon points="0,14 14,0 0,-14 -14,0" class="state-start" r="7" width="28" height="28"></polygon></g><g class="node  statediagram-state undefined" id="state-PlayerPosition-74" data-node="true" data-id="PlayerPosition" transform="translate(524.7305278778076, 114.78819274902344)"><rect class="basic label-container" style="" x="-61.3483772277832" y="-18.929397583007812" width="122.6967544555664" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-53.8483772277832, -11.429397583007812)"><rect></rect><foreignObject width="107.6967544555664" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">PlayerPosition</span></div></foreignObject></g></g><g class="node  statediagram-state undefined" id="state-PlayerEnergy-79" data-node="true" data-id="PlayerEnergy" transform="translate(714.7348613739014, 225.5057830810547)"><rect class="basic label-container" style="" x="-56.89236068725586" y="-18.929397583007812" width="113.78472137451172" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-49.39236068725586, -11.429397583007812)"><rect></rect><foreignObject width="98.78472137451172" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">PlayerEnergy</span></div></foreignObject></g></g></g></g></g><text x="580.2918090820312" y="-25" class="statediagramTitleText">数据恢复设计图</text></svg></div><h3 id='44-物理引擎和碰撞检测模块'><span>4.4 </span><strong><span>物理引擎和碰撞检测模块</span></strong></h3><h4 id='441-关键算法设计'><span>4.4.1 关键算法设计</span></h4><ul><li><p><strong><span>移动方块移动算法设计</span></strong></p></li></ul><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>58</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-keyword">void</span> <span class="cm-variable">OnCollisionStay2D</span>(<span class="cm-variable">Collision2D</span> <span class="cm-variable">collision</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">collision</span>.<span class="cm-variable">gameObject</span>.<span class="cm-variable">CompareTag</span>(<span class="cm-string">"Player"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">collision</span>.<span class="cm-variable">gameObject</span>.<span class="cm-variable">GetComponent</span><span class="cm-operator">&lt;</span><span class="cm-variable">PlayerMovement</span><span class="cm-operator">&gt;</span>().<span class="cm-variable">DashState</span> <span class="cm-operator">==</span> <span class="cm-number">2</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">collision</span>.<span class="cm-variable">gameObject</span>.<span class="cm-variable">GetComponent</span><span class="cm-operator">&lt;</span><span class="cm-variable">PlayerMovement</span><span class="cm-operator">&gt;</span>().<span class="cm-variable">GetDashDirection</span>() <span class="cm-operator">!=</span> <span class="cm-number">4</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">Rigidbody</span>.<span class="cm-variable">bodyType</span> <span class="cm-operator">==</span> <span class="cm-variable">RigidbodyType2D</span>.<span class="cm-variable">Kinematic</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">Ddirection</span> <span class="cm-operator">=</span> <span class="cm-variable">collision</span>.<span class="cm-variable">gameObject</span>.<span class="cm-variable">GetComponent</span><span class="cm-operator">&lt;</span><span class="cm-variable">PlayerMovement</span><span class="cm-operator">&gt;</span>().<span class="cm-variable">GetDashDirection</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Vector2</span> <span class="cm-variable">test</span> <span class="cm-operator">=</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">zero</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">switch</span> (<span class="cm-variable">Ddirection</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">0</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">test</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">1</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span> <span class="cm-operator">*</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">up</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">1</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">test</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">1</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span> <span class="cm-operator">*</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">2</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">test</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">1</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span> <span class="cm-operator">*</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">left</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">3</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">test</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">1</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span> <span class="cm-operator">*</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">right</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">4</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">test</span> <span class="cm-operator">=</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">zero</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">28</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">Physics2D</span>.<span class="cm-variable">BoxCast</span>(<span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">center</span>, <span class="cm-variable">Collider</span>.<span class="cm-variable">bounds</span>.<span class="cm-variable">size</span>, <span class="cm-number">0f</span>, <span class="cm-variable">test</span>, <span class="cm-number">0.1f</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">29</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">30</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">MoveDirection</span> <span class="cm-operator">=</span> <span class="cm-variable">Ddirection</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">31</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">switch</span> (<span class="cm-variable">Ddirection</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">32</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">33</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">0</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">34</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Rigidbody</span>.<span class="cm-variable">velocity</span> <span class="cm-operator">=</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">up</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">35</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">36</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">1</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">37</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Rigidbody</span>.<span class="cm-variable">velocity</span> <span class="cm-operator">=</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">down</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">38</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">39</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">2</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">40</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Rigidbody</span>.<span class="cm-variable">velocity</span> <span class="cm-operator">=</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">left</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">41</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">42</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">3</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">43</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Rigidbody</span>.<span class="cm-variable">velocity</span> <span class="cm-operator">=</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">right</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">44</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">45</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">case</span> <span class="cm-number">4</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">46</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Rigidbody</span>.<span class="cm-variable">velocity</span> <span class="cm-operator">=</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">zero</span> <span class="cm-operator">*</span> <span class="cm-variable">MoveSpeed</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">47</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">break</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">48</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">49</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
      </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">50</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">Ddirection</span> <span class="cm-operator">!=</span> <span class="cm-number">4</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">51</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">52</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Rigidbody</span>.<span class="cm-variable">bodyType</span> <span class="cm-operator">=</span> <span class="cm-variable">RigidbodyType2D</span>.<span class="cm-variable">Dynamic</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">53</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">54</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">55</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">CrushEffectSound</span>.<span class="cm-variable">Play</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">56</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">collision</span>.<span class="cm-variable">gameObject</span>.<span class="cm-variable">GetComponent</span><span class="cm-operator">&lt;</span><span class="cm-variable">PlayerMovement</span><span class="cm-operator">&gt;</span>().<span class="cm-variable">FromDashToNormal</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">57</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">58</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1225px;"></div><div class="CodeMirror-gutters" style="height: 1225px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><p><span>首先是检测移动方块是否被冲刺的角色碰撞,如果是,获取角色的冲刺状态和移动方向,判断移动方向相对于角色的位置是否与冲刺碰撞接触方向匹配,不匹配不进行移动,避免虚接触导致的移动方块的移动,如果匹配,将移动方块的物理状态由</span><code>Kinematic</code><span>设置为</span><code>Dynamic</code><span>并赋予一定的移动速度和零重力加速度</span></p><ul><li><p><strong><span>移动方块碰撞算法设计</span></strong></p></li></ul><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="C#" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c#"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>14</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">private</span> <span class="cm-keyword">void</span> <span class="cm-variable">Update</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Vector2</span> <span class="cm-variable">origin</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Vector2</span>((<span class="cm-variable-3">float</span>)(<span class="cm-variable">Math</span>.<span class="cm-variable">Round</span>(<span class="cm-variable">transform</span>.<span class="cm-variable">position</span>.<span class="cm-variable">x</span> <span class="cm-operator">*</span> <span class="cm-number">2</span>) <span class="cm-operator">/</span> <span class="cm-number">2</span>), (<span class="cm-variable-3">float</span>)<span class="cm-variable">Math</span>.<span class="cm-variable">Round</span>(<span class="cm-variable">transform</span>.<span class="cm-variable">position</span>.<span class="cm-variable">y</span>));</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">Rigidbody2D</span>.<span class="cm-variable">velocity</span>.<span class="cm-variable">magnitude</span> <span class="cm-operator">&lt;</span> <span class="cm-number">0.5f</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">Rigidbody2D</span>.<span class="cm-variable">bodyType</span> <span class="cm-operator">==</span> <span class="cm-variable">RigidbodyType2D</span>.<span class="cm-variable">Dynamic</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">CrushEffectSound</span>.<span class="cm-variable">Play</span>();</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Rigidbody2D</span>.<span class="cm-variable">bodyType</span> <span class="cm-operator">=</span> <span class="cm-variable">RigidbodyType2D</span>.<span class="cm-variable">Kinematic</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Rigidbody2D</span>.<span class="cm-variable">velocity</span> <span class="cm-operator">=</span> <span class="cm-variable">Vector2</span>.<span class="cm-variable">zero</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">transform</span>.<span class="cm-variable">position</span> <span class="cm-operator">=</span> <span class="cm-variable">origin</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 311px;"></div><div class="CodeMirror-gutters" style="height: 311px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><p><span>利用物理引擎,对于速度不符合要求的移动方块,判定为与其它碰撞体发生了碰撞,将物理状态设置为</span><code>Kinematic</code><span>不再受物理模拟影响</span></p><p><code>origin</code><span>的设计是为了修复在全仿真物理引擎下,对于像素游戏来说不规则的移动机制,即不是按照单位像素进行的移动,所以在碰撞后选择对于碰撞后移动方块的位置进行修复,使之满足像素游戏对于移动方块的移动需求,更加符合游戏逻辑,为后期移动方块与虚线方块的匹配也提供了更好的兼容性.</span></p><h3 id='45-音效与视觉效果模块'><span>4.5 </span><strong><span>音效与视觉效果模块</span></strong></h3><h4 id='451-音效设计'><span>4.5.1 音效设计</span></h4><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart6" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 614.021px; margin: auto;" viewBox="-8 -51.98147964477539 614.0208740234375 483.2048645019531" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart6{font-family:sans-serif;font-size:16px;fill:var(--text-color);}#mermaidChart6 .error-icon{fill:#552222;}#mermaidChart6 .error-text{fill:#552222;stroke:#552222;}#mermaidChart6 .edge-thickness-normal{stroke-width:2px;}#mermaidChart6 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart6 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart6 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart6 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart6 .marker{fill:#666;stroke:#666;}#mermaidChart6 .marker.cross{stroke:#666;}#mermaidChart6 svg{font-family:sans-serif;font-size:16px;}#mermaidChart6 .label{font-family:sans-serif;color:#000000;}#mermaidChart6 .cluster-label text{fill:#333;}#mermaidChart6 .cluster-label span,#mermaidChart6 p{color:#333;}#mermaidChart6 .label text,#mermaidChart6 span,#mermaidChart6 p{fill:#000000;color:#000000;}#mermaidChart6 .node rect,#mermaidChart6 .node circle,#mermaidChart6 .node ellipse,#mermaidChart6 .node polygon,#mermaidChart6 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaidChart6 .flowchart-label text{text-anchor:middle;}#mermaidChart6 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart6 .node .label{text-align:center;}#mermaidChart6 .node.clickable{cursor:pointer;}#mermaidChart6 .arrowheadPath{fill:#333333;}#mermaidChart6 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaidChart6 .flowchart-link{stroke:#666;fill:none;}#mermaidChart6 .edgeLabel{background-color:white;text-align:center;}#mermaidChart6 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaidChart6 .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaidChart6 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaidChart6 .cluster text{fill:#333;}#mermaidChart6 .cluster span,#mermaidChart6 p{color:#333;}#mermaidChart6 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart6 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart6 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart6_flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="6" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart6_flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart6_flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart6_flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart6_flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart6_flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster default flowchart-label" id="音效效应体"><rect style="" rx="0" ry="0" x="0" y="6.964698791503906" width="387.0138931274414" height="416.25867462158203"></rect><g class="cluster-label" transform="translate(153.50405502319336, 6.964698791503906)"><foreignObject width="80.00578308105469" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">音效效应体</span></div></foreignObject></g></g><g class="cluster default flowchart-label" id="音效源"><rect style="" rx="0" ry="0" x="469.01620864868164" y="0" width="129.00463104248047" height="423.22337341308594"></rect><g class="cluster-label" transform="translate(509.516788482666, 0)"><foreignObject width="48.00347137451172" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">音效源</span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M63.561,116.073L113.003,53.929L177.506,53.929L242.008,53.929L322.512,53.929L387.014,53.929L428.015,53.929L469.016,53.929L488.716,53.929" id="L-b1-block2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b1 LE-block2" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path><path d="M72.002,121.08L113.003,96.788L177.506,96.788L242.008,96.788L322.512,96.788L387.014,96.788L428.015,96.788L469.016,96.788L506.812,128.389" id="L-b1-block1-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b1 LE-block1" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path><path d="M362.014,150.718L387.014,150.718L428.015,150.718L469.016,150.718L488.716,150.718" id="L-b2-block1-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b2 LE-block1" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path><path d="M354.013,281.435L387.014,281.435L428.015,281.435L469.016,281.435L488.716,281.435" id="L-b3-block3-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b3 LE-block3" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path><path d="M199.633,252.326L242.008,216.076L322.512,216.076L387.014,216.076L428.015,216.076L469.016,216.076L511.114,173.419" id="L-b4-block1-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b4 LE-block1" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path><path d="M346.013,369.294L387.014,369.294L428.015,369.294L469.016,369.294L488.716,369.294" id="L-b5-block4-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b5 LE-block4" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path><path d="M72.002,140.728L113.003,150.718L177.506,150.718L242.008,150.718L277.709,150.718" id="L-b1-b2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b1 LE-b2" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path><path d="M57.462,153.932L113.003,271.256L148.705,271.256" id="L-b1-b4-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b1 LE-b4" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path><path d="M201.007,274.965L242.008,281.435L285.71,281.435" id="L-b4-b3-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-b4 LE-b3" style="fill:none;" marker-end="url(#mermaidChart6_flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(242.00810432434082, 53.92939758300781)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">跳跃</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(242.00810432434082, 96.78819274902344)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">冲刺</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(428.0150508880615, 150.71759033203125)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">碰撞</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(428.0150508880615, 281.4351806640625)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">打开</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(322.5115776062012, 216.07638549804688)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">按下</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(428.0150508880615, 369.2939758300781)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">匹配</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(177.5057888031006, 150.71759033203125)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">碰撞</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(113.00347328186035, 271.2557830810547)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">按压</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(242.00810432434082, 281.4351806640625)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">激活</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default default flowchart-label" id="flowchart-b1-61" data-node="true" data-id="b1" transform="translate(48.50115776062012, 135.00289154052734)"><rect class="basic label-container" style="" rx="0" ry="0" x="-23.501157760620117" y="-18.929397583007812" width="47.002315521240234" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-16.001157760620117, -11.429397583007812)"><rect></rect><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">角色</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-b2-62" data-node="true" data-id="b2" transform="translate(322.5115776062012, 150.71759033203125)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">移动方块</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-b3-63" data-node="true" data-id="b3" transform="translate(322.5115776062012, 281.4351806640625)"><rect class="basic label-container" style="" rx="0" ry="0" x="-31.50173568725586" y="-18.929397583007812" width="63.00347137451172" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-24.00173568725586, -11.429397583007812)"><rect></rect><foreignObject width="48.00347137451172" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">机关门</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-b4-64" data-node="true" data-id="b4" transform="translate(177.5057888031006, 271.2557830810547)"><rect class="basic label-container" style="" rx="0" ry="0" x="-23.501157760620117" y="-18.929397583007812" width="47.002315521240234" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-16.001157760620117, -11.429397583007812)"><rect></rect><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">按钮</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-b5-65" data-node="true" data-id="b5" transform="translate(322.5115776062012, 369.2939758300781)"><rect class="basic label-container" style="" rx="0" ry="0" x="-23.501157760620117" y="-18.929397583007812" width="47.002315521240234" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-16.001157760620117, -11.429397583007812)"><rect></rect><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">场景</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block2-57" data-node="true" data-id="block2" transform="translate(533.5185241699219, 53.92939758300781)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">跳跃音效</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block1-58" data-node="true" data-id="block1" transform="translate(533.5185241699219, 150.71759033203125)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">碰撞音效</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block3-59" data-node="true" data-id="block3" transform="translate(533.5185241699219, 281.4351806640625)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">互动音效</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-block4-60" data-node="true" data-id="block4" transform="translate(533.5185241699219, 369.2939758300781)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">背景音乐</span></div></foreignObject></g></g></g></g></g><text x="299.01043701171875" y="-25" class="flowchartTitleText">音效设计模式图</text></svg></div><h4 id='452-ui设计'><span>4.5.2 UI设计</span></h4><div class="md-diagram-panel md-fences-adv-panel" lang="mermaid"><svg id="mermaidChart7" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 453.014px; margin: auto;" viewBox="-8 -51.98147964477539 453.0138854980469 628.563720703125" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaidChart7{font-family:sans-serif;font-size:16px;fill:var(--text-color);}#mermaidChart7 .error-icon{fill:#552222;}#mermaidChart7 .error-text{fill:#552222;stroke:#552222;}#mermaidChart7 .edge-thickness-normal{stroke-width:2px;}#mermaidChart7 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart7 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart7 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart7 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart7 .marker{fill:#666;stroke:#666;}#mermaidChart7 .marker.cross{stroke:#666;}#mermaidChart7 svg{font-family:sans-serif;font-size:16px;}#mermaidChart7 .label{font-family:sans-serif;color:#000000;}#mermaidChart7 .cluster-label text{fill:#333;}#mermaidChart7 .cluster-label span,#mermaidChart7 p{color:#333;}#mermaidChart7 .label text,#mermaidChart7 span,#mermaidChart7 p{fill:#000000;color:#000000;}#mermaidChart7 .node rect,#mermaidChart7 .node circle,#mermaidChart7 .node ellipse,#mermaidChart7 .node polygon,#mermaidChart7 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaidChart7 .flowchart-label text{text-anchor:middle;}#mermaidChart7 .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaidChart7 .node .label{text-align:center;}#mermaidChart7 .node.clickable{cursor:pointer;}#mermaidChart7 .arrowheadPath{fill:#333333;}#mermaidChart7 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaidChart7 .flowchart-link{stroke:#666;fill:none;}#mermaidChart7 .edgeLabel{background-color:white;text-align:center;}#mermaidChart7 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaidChart7 .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#mermaidChart7 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaidChart7 .cluster text{fill:#333;}#mermaidChart7 .cluster span,#mermaidChart7 p{color:#333;}#mermaidChart7 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart7 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaidChart7 :root{--mermaid-alt-font-family:sans-serif;}</style><g><marker id="mermaidChart7_flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="6" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart7_flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart7_flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart7_flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="mermaidChart7_flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="mermaidChart7_flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster default flowchart-label" id="UI控制体"><rect style="" rx="0" ry="0" x="0" y="6.964698791503906" width="129.00463104248047" height="561.6174697875977"></rect><g class="cluster-label" transform="translate(32.178096771240234, 6.964698791503906)"><foreignObject width="64.6484375" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">UI控制体</span></div></foreignObject></g></g><g class="cluster default flowchart-label" id="UI模块"><rect style="" rx="0" ry="0" x="211.0069465637207" y="0" width="129.00463104248047" height="568.5821685791016"></rect><g class="cluster-label" transform="translate(251.18200492858887, 0)"><foreignObject width="48.65451431274414" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">UI模块</span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M96.004,64.893L129.005,53.929L170.006,53.929L211.007,53.929L230.707,53.929" id="L-c1-u2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-c1 LE-u2" style="fill:none;" marker-end="url(#mermaidChart7_flowchart-pointEnd)"></path><path d="M96.004,86.347L129.005,97.859L170.006,97.859L211.007,97.859L253.105,140.516" id="L-c1-u7-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-c1 LE-u7" style="fill:none;" marker-end="url(#mermaidChart7_flowchart-pointEnd)"></path><path d="M96.004,338.935L129.005,338.935L170.006,338.935L211.007,338.935L230.707,338.935" id="L-c2-u6-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-c2 LE-u6" style="fill:none;" marker-end="url(#mermaidChart7_flowchart-pointEnd)"></path><path d="M83.184,473.223L129.005,426.794L170.006,426.794L211.007,426.794L230.707,426.794" id="L-c5-u4-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-c5 LE-u4" style="fill:none;" marker-end="url(#mermaidChart7_flowchart-pointEnd)"></path><path d="M88.756,500.613L129.005,514.653L170.006,514.653L211.007,514.653L238.708,514.653" id="L-c5-u5-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-c5 LE-u5" style="fill:none;" marker-end="url(#mermaidChart7_flowchart-pointEnd)"></path><path d="M104.005,163.218L129.005,163.218L170.006,163.218L211.007,163.218L246.708,163.218" id="L-c3-u7-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-c3 LE-u7" style="fill:none;" marker-end="url(#mermaidChart7_flowchart-pointEnd)"></path><path d="M104.005,251.076L129.005,251.076L170.006,251.076L211.007,251.076L258.476,186.419" id="L-c4-u7-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-c4 LE-u7" style="fill:none;" marker-end="url(#mermaidChart7_flowchart-pointEnd)"></path><path d="M315.012,251.076L340.012,251.076L365.012,251.076L384.712,251.076" id="L-u1-淡出-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-u1 LE-淡出" style="fill:none;" marker-end="url(#mermaidChart7_flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(170.0057888031006, 53.92939758300781)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">激活</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(170.0057888031006, 97.85879516601562)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">激活</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(170.0057888031006, 338.9351806640625)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">触发</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(170.0057888031006, 426.7939758300781)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">触发</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(170.0057888031006, 514.6527709960938)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">触发</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(170.0057888031006, 163.21759033203125)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">激活</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(170.0057888031006, 251.07638549804688)"><g class="label" transform="translate(-16.001157760620117, -11.429397583007812)"><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">激活</span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default default flowchart-label" id="flowchart-c1-92" data-node="true" data-id="c1" transform="translate(64.50231552124023, 75.35879516601562)"><rect class="basic label-container" style="" rx="0" ry="0" x="-31.50173568725586" y="-18.929397583007812" width="63.00347137451172" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-24.00173568725586, -11.429397583007812)"><rect></rect><foreignObject width="48.00347137451172" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">存档点</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-c3-93" data-node="true" data-id="c3" transform="translate(64.50231552124023, 163.21759033203125)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">技能物品</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-c4-94" data-node="true" data-id="c4" transform="translate(64.50231552124023, 251.07638549804688)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">通关物品</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-c2-95" data-node="true" data-id="c2" transform="translate(64.50231552124023, 338.9351806640625)"><rect class="basic label-container" style="" rx="0" ry="0" x="-31.50173568725586" y="-18.929397583007812" width="63.00347137451172" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-24.00173568725586, -11.429397583007812)"><rect></rect><foreignObject width="48.00347137451172" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">传送床</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-c5-96" data-node="true" data-id="c5" transform="translate(64.50231552124023, 492.15277099609375)"><rect class="basic label-container" style="" rx="0" ry="0" x="-24.25347137451172" y="-18.929397583007812" width="48.50694274902344" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-16.75347137451172, -11.429397583007812)"><rect></rect><foreignObject width="33.50694274902344" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">NPC</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-u2-86" data-node="true" data-id="u2" transform="translate(275.50926208496094, 53.92939758300781)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">存档提示</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-u4-87" data-node="true" data-id="u4" transform="translate(275.50926208496094, 426.7939758300781)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">对话文字</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-u1-88" data-node="true" data-id="u1" transform="translate(275.50926208496094, 251.07638549804688)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">游戏说明</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-u5-89" data-node="true" data-id="u5" transform="translate(275.50926208496094, 514.6527709960938)"><rect class="basic label-container" style="" rx="0" ry="0" x="-31.50173568725586" y="-18.929397583007812" width="63.00347137451172" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-24.00173568725586, -11.429397583007812)"><rect></rect><foreignObject width="48.00347137451172" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">对话框</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-u6-90" data-node="true" data-id="u6" transform="translate(275.50926208496094, 338.9351806640625)"><rect class="basic label-container" style="" rx="0" ry="0" x="-39.502315521240234" y="-18.929397583007812" width="79.00463104248047" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-32.002315521240234, -11.429397583007812)"><rect></rect><foreignObject width="64.00463104248047" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">结束界面</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-u7-91" data-node="true" data-id="u7" transform="translate(275.50926208496094, 163.21759033203125)"><rect class="basic label-container" style="" rx="0" ry="0" x="-23.501157760620117" y="-18.929397583007812" width="47.002315521240234" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-16.001157760620117, -11.429397583007812)"><rect></rect><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">光效</span></div></foreignObject></g></g><g class="node default default flowchart-label" id="flowchart-淡出-109" data-node="true" data-id="淡出" transform="translate(413.5127353668213, 251.07638549804688)"><rect class="basic label-container" style="" rx="0" ry="0" x="-23.501157760620117" y="-18.929397583007812" width="47.002315521240234" height="37.858795166015625"></rect><g class="label" style="" transform="translate(-16.001157760620117, -11.429397583007812)"><rect></rect><foreignObject width="32.002315521240234" height="22.858795166015625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">淡出</span></div></foreignObject></g></g></g></g></g><text x="218.50694274902344" y="-25" class="flowchartTitleText">UI设计模式图</text></svg></div><h2 id='5-性能设计'><span>5. </span><strong><span>性能设计</span></strong></h2><h3 id='51-性能需求'><span>5.1 </span><strong><span>性能需求</span></strong></h3><ul><li><p><span>确保游戏在目标平台上能够以稳定的帧率运行。</span></p></li><li><p><span>优化场景加载时间和内存占用。</span></p></li></ul><h3 id='52-性能优化策略'><span>5.2 </span><strong><span>性能优化策略</span></strong></h3><ul><li><p><span>尽量分离场景加载与卸载来减少内存占用,比如开始界面与结束界面相对于世界加载模式为重加载,减少场景挂载数量,减小性能消耗。</span></p></li></ul><h2 id='6-部署设计'><span>6. </span><strong><span>部署设计</span></strong></h2><h3 id='61-环境配置'><span>6.1 </span><strong><span>环境配置</span></strong></h3><ul><li><p><strong><span>系统环境</span></strong><span>: Windows 11</span></p></li><li><p><strong><span>操作环境</span></strong><span>: VS2022, Unity, VSCode</span></p></li></ul><h3 id='62-部署步骤'><span>6.2 </span><strong><span>部署步骤</span></strong></h3><p><span>详细说明系统的安装和部署步骤。</span></p><ol start='' ><li><p><strong><span>安装</span></strong><span>:</span></p><ul><li><p><span>安装Unity</span>
      <span>首先进入</span><a href='https://unity.cn/'><span>Unity官方网站</span></a>
      <span>网站界面如下</span>
      <img src="image.png" referrerpolicy="no-referrer" alt="Unity官网">
      <span>点击网站右上角的</span><strong><span>下载Unity</span></strong>
      <img src="屏幕截图 2024-08-31 162847.png" referrerpolicy="no-referrer" alt="点击下载">
      <span>跳转到界面</span>
      <img src="image-1.png" referrerpolicy="no-referrer" alt="下载界面">
      <span>点击</span><strong><span>下载Unity Hub</span></strong>
      <span>它会弹出下载提示,点击</span><strong><span>Windows下载</span></strong>
      <img src="image-2.png" referrerpolicy="no-referrer" alt="下载提示">
      <span>Unity Hub下载完成后在原来的下载界面向下滑</span>
      <span>找到</span><strong><span>Unity版本</span></strong><span>栏目,点击相应的</span><strong><span>长期支持版本</span></strong><span>标签,然后点击</span><strong><span>从Unity Hub下载</span></strong>
      <span>它会询问你是否允许打开</span><code>Unity Hub</code><span>允许便是</span>
      <span>打开后会有下载界面</span>
      <img src="image-3.png" referrerpolicy="no-referrer" alt="Unity Hub下载界面">
      <span>记得下载内部显示的开发工具,建议不适用汉化包,因为这会破坏原本的设计和谐性,使得开发尤其是代码编写会变得更困难.</span></p><p><span>下载完成后即可开始开发项目</span></p></li><li><p><span>在项目开发完毕后Build</span>
      <span>找到开发完成的项目,打开项目开发界面后,点击左上角菜单栏的</span><code>File</code><span>栏,找到</span><code>BuildSettings</code>
      <img src="image-4.png" referrerpolicy="no-referrer" alt="BuildSettings">
      <span>这里需要构建两个平台的游戏程序分别是适用于</span><code>Windows,Mac,Linux</code><span>的游戏平台,和</span><code>WebGL</code><span>平台,左侧栏</span><code>Platform</code><span>两次分别选择</span><code>Windows, Mac, Linux</code><span>和</span><code>WebGL</code><span>, 加载完成后点击右下角的</span><code>Build</code><span>,选择Build进入的文件目录地址,完成构建.</span>
      <span>其中适用于电脑本机系统平台的游戏项目直接点击生成项目文件中的</span><code>.exe</code><span>可执行文件即可运行.</span></p></li><li><p><span>部署至网站</span>
      <span>编写网页代码,在网页中需要加入游戏的块元素中加入</span><code>&lt;iframe&gt;</code><span>元素,配置好属性</span></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="html"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 40.9867px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 37px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>10</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -36.9936px; width: 37px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">iframe</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-attribute">id</span>=<span class="cm-string">"webgl"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-attribute">style</span>=<span class="cm-string">"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-string">position: relative;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-string">width: 100%;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-string">height: 100%;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-string">border: medium none;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-string">"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 28px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-attribute">src</span>=<span class="cm-string">"Game/index.html"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -36.9936px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 28px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">iframe</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="height: 208px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 36px;"></div></div></div></div></pre><p><span>主要注意</span><code>id</code><span>属性的填写和</span><code>src</code><span>路径的正确性,将之前生成的文件夹完整粘贴进入网页项目根目录下,文件夹名修改为</span><code>Game</code><span>或者上面的</span><code>src</code><span>路径的第一项修改为文件夹名.</span></p><p><span>完成上述步骤后由于个人没有服务器,选择将游戏项目部署在</span><code>Gothub Pages</code><span>下,由于原网站已经部署了博客,所以这里选择嵌入博客网站.</span>
      <span>博客网站原文件结构如下</span>
      <img src="image-5.png" referrerpolicy="no-referrer" alt="博客网站文件结构">
      <span>首先将之前的网页完整文件夹(根目录文件夹)复制到博客网站根目录中的</span><code>source</code><span>文件夹下,这个文件内储存的是挂载上网页的文件项目.</span>
      <span>在博客配置文件</span><code>_config.yml</code><span>文件内找到</span><code># Directory</code><span>一栏.</span>
      <img src="image-6.png" referrerpolicy="no-referrer" alt="配置文件">
      <span>注意内部的</span><code>skip_render</code><span>项,这里指的是主题在渲染时指定忽略处理的文件</span>
      <span>如图在这一项内按照图片格式加入</span><code>[复制的网站文件夹名]/**/*</code><span>这样可以忽略移植过来的网站文件夹内的全部文件.</span></p><p><span>完成上述步骤后在博客根目录下依次执行</span></p><pre class="md-fences md-end-block md-fences-with-lineno ty-contain-cm modeLoaded" spellcheck="false" lang="sh"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sh"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 8.3805px; left: 31.9879px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 28px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>2</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: -27.9948px; width: 28px;"></div><div class="CodeMirror-gutter-wrapper CodeMirror-activeline-gutter" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> hexo clean &amp;&amp; generate</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -27.9948px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt CodeMirror-linenumber-show" style="left: 0px; width: 19px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> hexo deploy</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 42px;"></div><div class="CodeMirror-gutters" style="height: 42px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 27px;"></div></div></div></div></pre><p><span>完成部署</span>
      <span>由于实际的博客地址已经经过了DNS映射,地址变为</span><a href='https://qinaida.cn/tengpaz/AKittyDream' target='_blank' class='url'>https://qinaida.cn/tengpaz/AKittyDream</a></p><p><span>至此完成游戏网站的部署</span></p></li></ul></li></ol><h2 id='7-扩展'><span>7. </span><strong><span>扩展</span></strong></h2><h3 id='71-扩展性设计'><span>7.1 </span><strong><span>扩展性设计</span></strong></h3><p><span>项目为未来添加更加完善的存档系统,游戏引导等提供了可使用接口,</span><code>Unity</code><span>引擎本身的功能为游戏项目添加代码组件提供了丰富的接口设计便于后期添加功能,进行游戏改造与开发。</span></p><hr /></div></div>
      </body>
    </div>

    <div class="footer">
      <p>Tengpaz - Copyright &copy; 2024</p>
    </div>
  </body>

  <script>
    // JS 代码
  </script>
</html>